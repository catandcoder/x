<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="崔某人的碎碎念,通才基础上的专才"><meta name="keywords" content="mysql,golang,算法"><title>gdb/lldb调试工具 | 清澄秋爽</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">gdb/lldb调试工具</h1><a id="logo" href="/.">清澄秋爽</a><p class="description">苹果树下的思索者 书写是对思维的缓存</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">gdb/lldb调试工具</h1><div class="post-meta"><a href="/2019/10/30/神器gdb/#comments" class="comment-count"></a><p><span class="date">Oct 30, 2019</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="What-is-GDB"><a class="header-anchor" href="#What-is-GDB">¶</a>What is GDB?</h2>
<br>
<p>GDB, the <strong><a href="https://www.gnu.org/software/gdb/" target="_blank" rel="noopener">GNU Project debugger</a></strong>, allows you to see what is going on `inside’ another program while it executes – or what another program was doing at the moment it crashed.</p>
<p>GDB can do four main kinds of things (plus other things in support of these) to help you catch bugs in the act:</p>
<ul>
<li>Start your program, specifying anything that might affect its behavior.</li>
<li>Make your program stop on specified conditions.</li>
<li>Examine what has happened, when your program has stopped.</li>
<li>Change things in your program, so you can experiment with correcting the effects of one bug and go on to learn about another.</li>
</ul>
<br>
<p>但因为Mac上GDB支持不好,故而多用功能类似的LLDB</p>
<font size="1">
<p>关于二者关系：</p>
<p>gdb像是个“年迈而经验丰富的老人”，lldb像是个“与时俱进的活力青年”。就像它们的创造者一样，一个是自由软件的灵魂人物 Richard Stallman，一个是扛起了Apple Swift大旗（及llvm）的Chris Lattner.</p>
<p><a href="https://zhuanlan.zhihu.com/p/43959058" target="_blank" rel="noopener">初识LLDB 调试 MySQL</a></p>
<p><a href="https://dashen.tech/2021/04/05/%E7%BC%96%E8%AF%91%E5%99%A8%E6%BC%AB%E8%B0%88/" target="_blank" rel="noopener">编译器漫谈</a></p>
</font>
<br>
<hr>
<br>
<h2 id="入门指南"><a class="header-anchor" href="#入门指南">¶</a>入门指南</h2>
<br>
<p><a href="https://zhuanlan.zhihu.com/p/74897601" target="_blank" rel="noopener">GDB调试入门指南</a></p>
<p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/gdb.html" target="_blank" rel="noopener">Linux工具集快查</a></p>
<p><a href="https://www.freesion.com/article/10291373989/" target="_blank" rel="noopener">初探LLDB调试MYSQL，一条最简单的SELECT语句是如何执行的？</a></p>
<p><a href="https://colobu.com/2018/03/12/Debugging-Go-Code-with-LLDB/" target="_blank" rel="noopener">[译]使用 LLDB 调试 Go 程序</a></p>
<p><a href="https://chai2010.cn/advanced-go-programming-book/ch3-asm/ch3-09-debug.html" target="_blank" rel="noopener">Delve调试器</a></p>
<br>
<hr>
<br>
<h2 id="使用案例"><a class="header-anchor" href="#使用案例">¶</a>使用案例</h2>
<br>
<h3 id="验证InnoDB自增row-id的上限"><a class="header-anchor" href="#验证InnoDB自增row-id的上限">¶</a>验证InnoDB自增row_id的上限</h3>
<br>
<p>最开始执行时可能出现如下问题:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Unable to find Mach task port for process-id 42060: (os/kern) failure (0x5).</span><br><span class="line"> (please check gdb is codesigned - see taskgated(8))</span><br><span class="line">No symbol table is loaded.  Use the &quot;file&quot; command.</span><br></pre></td></tr></table></figure>
<p>按照<a href="https://blog.csdn.net/LU_ZHAO/article/details/104803399/" target="_blank" rel="noopener">此步骤</a>安装证书即可.</p>
<p><a href="https://baijiahao.baidu.com/s?id=1676252772927806339&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">MySQL表自增id用完了该怎么办？</a></p>
<p><a href="https://blog.csdn.net/u011296165/article/details/105102377/" target="_blank" rel="noopener">MySQL只学有用的–你知道自增ID会用完吗？</a></p>
<p><a href="http://mysql.dashen.tech/mysql45/45.%E8%87%AA%E5%A2%9Eid%E7%94%A8%E5%AE%8C%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F.html" target="_blank" rel="noopener">45 | 自增id用完怎么办？</a></p>
<p><a href="https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;srcqid=4697666102400762409&amp;tn=50000021_hao_pg&amp;wd=LLDB%20mysql&amp;oq=LLDB&amp;rsv_pq=c2edcfc500020abe&amp;rsv_t=eb0160a1zSORAOSPyTQ2I8BERcvyPAmYO1y2uiBubUfJ5fRlrY3mD8QcFoH0uaiOniNMo3VK&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=7&amp;rsv_sug1=3&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_btype=t&amp;inputT=1502&amp;rsv_sug4=1805" target="_blank" rel="noopener">LLDB 调试mysql</a></p>
<br>
<hr>
<br>
<h3 id="探究Go程序启动过程-即确定真正的入口函数"><a class="header-anchor" href="#探究Go程序启动过程-即确定真正的入口函数">¶</a>探究Go程序启动过程(即确定真正的入口函数)</h3>
<br>
<p>以下内容是对 雨痕<a href="https://book.douban.com/subject/26832468/" target="_blank" rel="noopener">Go语言学习笔记.下卷</a> 和 <a href="https://github.com/qcrao" target="_blank" rel="noopener">qcrao</a><a href="https://www.bookstack.cn/read/qcrao-Go-Questions/%E7%BC%96%E8%AF%91%E5%92%8C%E9%93%BE%E6%8E%A5-Go%20%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84.md" target="_blank" rel="noopener">Go 语言问题集(Go Questions)–Go 程序启动过程是怎样的</a> 实践与记录：</p>
<p><strong>test.go:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(<span class="string">"hello shuang!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<p><code>go build -gcflags &quot;-N -l&quot; -o dashen test.go</code></p>
<img src="/2019/10/30/神器gdb/0.png" width="100%" height="50%">
<img src="/2019/10/30/神器gdb/1.png" width="100%" height="50%">
<br>
<p>查看<code>/usr/local/go/src/runtime/rt0_linux_amd64.s</code></p>
<br>
<img src="/2019/10/30/神器gdb/3.png" width="100%" height="50%">
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright 2009 The Go Authors. All rights reserved.</span></span><br><span class="line"><span class="comment">// Use of this source code is governed by a BSD-style</span></span><br><span class="line"><span class="comment">// license that can be found in the LICENSE file.</span></span><br><span class="line"></span><br><span class="line">#include <span class="string">"textflag.h"</span></span><br><span class="line"></span><br><span class="line">TEXT _rt0_amd64_linux(SB),NOSPLIT,$<span class="number">-8</span></span><br><span class="line">	JMP	_rt0_amd64(SB)</span><br><span class="line"></span><br><span class="line">TEXT _rt0_amd64_linux_lib(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	JMP	_rt0_amd64_lib(SB)</span><br></pre></td></tr></table></figure>
<font size="1">
<p>runtime目录下，有很多不同平台的入口文件，均由汇编实现：</p>
<img src="/2019/10/30/神器gdb/2.png" width="100%" height="50%">
</font>
<br>
<p>用gdb设置断点，查看<code>_rt0_amd64</code>在哪里</p>
<img src="/2019/10/30/神器gdb/4.png" width="100%" height="50%">
<p><code>src/runtime/asm_amd64.s</code> 这段汇编就是要找的真正目标~其完成了初始化和运行时的启动:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">TEXT runtime·rt0_go(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">    <span class="comment">// 省略很多 CPU 相关的特性标志位检查的代码</span></span><br><span class="line">    <span class="comment">// 基本看不懂</span></span><br><span class="line">    <span class="comment">// ………………………………</span></span><br><span class="line">    <span class="comment">// 下面是最后调用的一些函数，比较重要</span></span><br><span class="line">    <span class="comment">// 初始化执行文件的绝对路径</span></span><br><span class="line">    CALL    runtime·args(SB)</span><br><span class="line">    <span class="comment">// 初始化 CPU 个数和内存页大小</span></span><br><span class="line">    CALL    runtime·osinit(SB)</span><br><span class="line">    <span class="comment">// 初始化命令行参数、环境变量、gc、栈空间、内存管理、所有 P 实例、HASH算法等</span></span><br><span class="line">    CALL    runtime·schedinit(SB)</span><br><span class="line">    <span class="comment">// 要在 main goroutine 上运行的函数</span></span><br><span class="line">    MOVQ    $runtime·mainPC(SB), AX        <span class="comment">// entry</span></span><br><span class="line">    PUSHQ    AX</span><br><span class="line">    PUSHQ    $<span class="number">0</span>            <span class="comment">// arg size</span></span><br><span class="line">    <span class="comment">// 新建一个 goroutine，该 goroutine 绑定 runtime.main，放在 P 的本地队列，等待调度</span></span><br><span class="line">    CALL    runtime·newproc(SB)</span><br><span class="line">    POPQ    AX</span><br><span class="line">    POPQ    AX</span><br><span class="line">    <span class="comment">// 启动M，开始调度goroutine</span></span><br><span class="line">    CALL    runtime·mstart(SB)</span><br><span class="line">    MOVL    $<span class="number">0xf1</span>, <span class="number">0xf1</span>  <span class="comment">// crash</span></span><br><span class="line">    RET</span><br><span class="line">DATA    runtime·mainPC+<span class="number">0</span>(SB)/<span class="number">8</span>,$runtime·main(SB)</span><br><span class="line">GLOBL    runtime·mainPC(SB),RODATA,$<span class="number">8</span></span><br></pre></td></tr></table></figure>
<details>
<summary><b>完整文件参考:</b></summary>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright 2009 The Go Authors. All rights reserved.</span></span><br><span class="line"><span class="comment">// Use of this source code is governed by a BSD-style</span></span><br><span class="line"><span class="comment">// license that can be found in the LICENSE file.</span></span><br><span class="line"></span><br><span class="line">#include <span class="string">"go_asm.h"</span></span><br><span class="line">#include <span class="string">"go_tls.h"</span></span><br><span class="line">#include <span class="string">"funcdata.h"</span></span><br><span class="line">#include <span class="string">"textflag.h"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _rt0_amd64 is common startup code for most amd64 systems when using</span></span><br><span class="line"><span class="comment">// internal linking. This is the entry point for the program from the</span></span><br><span class="line"><span class="comment">// kernel for an ordinary -buildmode=exe program. The stack holds the</span></span><br><span class="line"><span class="comment">// number of arguments and the C-style argv.</span></span><br><span class="line">TEXT _rt0_amd64(SB),NOSPLIT,$<span class="number">-8</span></span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), DI	<span class="comment">// argc</span></span><br><span class="line">	LEAQ	<span class="number">8</span>(SP), SI	<span class="comment">// argv</span></span><br><span class="line">	JMP	runtime·rt0_go(SB)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main is common startup code for most amd64 systems when using</span></span><br><span class="line"><span class="comment">// external linking. The C startup code will call the symbol "main"</span></span><br><span class="line"><span class="comment">// passing argc and argv in the usual C ABI registers DI and SI.</span></span><br><span class="line">TEXT main(SB),NOSPLIT,$<span class="number">-8</span></span><br><span class="line">	JMP	runtime·rt0_go(SB)</span><br><span class="line"></span><br><span class="line"><span class="comment">// _rt0_amd64_lib is common startup code for most amd64 systems when</span></span><br><span class="line"><span class="comment">// using -buildmode=c-archive or -buildmode=c-shared. The linker will</span></span><br><span class="line"><span class="comment">// arrange to invoke this function as a global constructor (for</span></span><br><span class="line"><span class="comment">// c-archive) or when the shared library is loaded (for c-shared).</span></span><br><span class="line"><span class="comment">// We expect argc and argv to be passed in the usual C ABI registers</span></span><br><span class="line"><span class="comment">// DI and SI.</span></span><br><span class="line">TEXT _rt0_amd64_lib(SB),NOSPLIT,$<span class="number">0x50</span></span><br><span class="line">	<span class="comment">// Align stack per ELF ABI requirements.</span></span><br><span class="line">	MOVQ	SP, AX</span><br><span class="line">	ANDQ	$~<span class="number">15</span>, SP</span><br><span class="line">	<span class="comment">// Save C ABI callee-saved registers, as caller may need them.</span></span><br><span class="line">	MOVQ	BX, <span class="number">0x10</span>(SP)</span><br><span class="line">	MOVQ	BP, <span class="number">0x18</span>(SP)</span><br><span class="line">	MOVQ	R12, <span class="number">0x20</span>(SP)</span><br><span class="line">	MOVQ	R13, <span class="number">0x28</span>(SP)</span><br><span class="line">	MOVQ	R14, <span class="number">0x30</span>(SP)</span><br><span class="line">	MOVQ	R15, <span class="number">0x38</span>(SP)</span><br><span class="line">	MOVQ	AX, <span class="number">0x40</span>(SP)</span><br><span class="line"></span><br><span class="line">	MOVQ	DI, _rt0_amd64_lib_argc&lt;&gt;(SB)</span><br><span class="line">	MOVQ	SI, _rt0_amd64_lib_argv&lt;&gt;(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Synchronous initialization.</span></span><br><span class="line">	CALL	runtime·libpreinit(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Create a new thread to finish Go runtime initialization.</span></span><br><span class="line">	MOVQ	_cgo_sys_thread_create(SB), AX</span><br><span class="line">	TESTQ	AX, AX</span><br><span class="line">	JZ	nocgo</span><br><span class="line">	MOVQ	$_rt0_amd64_lib_go(SB), DI</span><br><span class="line">	MOVQ	$<span class="number">0</span>, SI</span><br><span class="line">	CALL	AX</span><br><span class="line">	JMP	restore</span><br><span class="line"></span><br><span class="line">nocgo:</span><br><span class="line">	MOVQ	$<span class="number">0x800000</span>, <span class="number">0</span>(SP)		<span class="comment">// stacksize</span></span><br><span class="line">	MOVQ	$_rt0_amd64_lib_go(SB), AX</span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)			<span class="comment">// fn</span></span><br><span class="line">	CALL	runtime·newosproc0(SB)</span><br><span class="line"></span><br><span class="line">restore:</span><br><span class="line">	MOVQ	<span class="number">0x10</span>(SP), BX</span><br><span class="line">	MOVQ	<span class="number">0x18</span>(SP), BP</span><br><span class="line">	MOVQ	<span class="number">0x20</span>(SP), R12</span><br><span class="line">	MOVQ	<span class="number">0x28</span>(SP), R13</span><br><span class="line">	MOVQ	<span class="number">0x30</span>(SP), R14</span><br><span class="line">	MOVQ	<span class="number">0x38</span>(SP), R15</span><br><span class="line">	MOVQ	<span class="number">0x40</span>(SP), SP</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// _rt0_amd64_lib_go initializes the Go runtime.</span></span><br><span class="line"><span class="comment">// This is started in a separate thread by _rt0_amd64_lib.</span></span><br><span class="line">TEXT _rt0_amd64_lib_go(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	MOVQ	_rt0_amd64_lib_argc&lt;&gt;(SB), DI</span><br><span class="line">	MOVQ	_rt0_amd64_lib_argv&lt;&gt;(SB), SI</span><br><span class="line">	JMP	runtime·rt0_go(SB)</span><br><span class="line"></span><br><span class="line">DATA _rt0_amd64_lib_argc&lt;&gt;(SB)/<span class="number">8</span>, $<span class="number">0</span></span><br><span class="line">GLOBL _rt0_amd64_lib_argc&lt;&gt;(SB),NOPTR, $<span class="number">8</span></span><br><span class="line">DATA _rt0_amd64_lib_argv&lt;&gt;(SB)/<span class="number">8</span>, $<span class="number">0</span></span><br><span class="line">GLOBL _rt0_amd64_lib_argv&lt;&gt;(SB),NOPTR, $<span class="number">8</span></span><br><span class="line"></span><br><span class="line">TEXT runtime·rt0_go(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	<span class="comment">// copy arguments forward on an even stack</span></span><br><span class="line">	MOVQ	DI, AX		<span class="comment">// argc</span></span><br><span class="line">	MOVQ	SI, BX		<span class="comment">// argv</span></span><br><span class="line">	SUBQ	$(<span class="number">4</span>*<span class="number">8</span>+<span class="number">7</span>), SP		<span class="comment">// 2args 2auto</span></span><br><span class="line">	ANDQ	$~<span class="number">15</span>, SP</span><br><span class="line">	MOVQ	AX, <span class="number">16</span>(SP)</span><br><span class="line">	MOVQ	BX, <span class="number">24</span>(SP)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// create istack out of the given (operating system) stack.</span></span><br><span class="line">	<span class="comment">// _cgo_init may update stackguard.</span></span><br><span class="line">	MOVQ	$runtime·g0(SB), DI</span><br><span class="line">	LEAQ	(<span class="number">-64</span>*<span class="number">1024</span>+<span class="number">104</span>)(SP), BX</span><br><span class="line">	MOVQ	BX, g_stackguard0(DI)</span><br><span class="line">	MOVQ	BX, g_stackguard1(DI)</span><br><span class="line">	MOVQ	BX, (g_stack+stack_lo)(DI)</span><br><span class="line">	MOVQ	SP, (g_stack+stack_hi)(DI)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// find out information about the processor we're on</span></span><br><span class="line">	MOVL	$<span class="number">0</span>, AX</span><br><span class="line">	CPUID</span><br><span class="line">	MOVL	AX, SI</span><br><span class="line">	CMPL	AX, $<span class="number">0</span></span><br><span class="line">	JE	nocpuinfo</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Figure out how to serialize RDTSC.</span></span><br><span class="line">	<span class="comment">// On Intel processors LFENCE is enough. AMD requires MFENCE.</span></span><br><span class="line">	<span class="comment">// Don't know about the rest, so let's do MFENCE.</span></span><br><span class="line">	CMPL	BX, $<span class="number">0x756E6547</span>  <span class="comment">// "Genu"</span></span><br><span class="line">	JNE	notintel</span><br><span class="line">	CMPL	DX, $<span class="number">0x49656E69</span>  <span class="comment">// "ineI"</span></span><br><span class="line">	JNE	notintel</span><br><span class="line">	CMPL	CX, $<span class="number">0x6C65746E</span>  <span class="comment">// "ntel"</span></span><br><span class="line">	JNE	notintel</span><br><span class="line">	MOVB	$<span class="number">1</span>, runtime·isIntel(SB)</span><br><span class="line">	MOVB	$<span class="number">1</span>, runtime·lfenceBeforeRdtsc(SB)</span><br><span class="line">notintel:</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Load EAX=1 cpuid flags</span></span><br><span class="line">	MOVL	$<span class="number">1</span>, AX</span><br><span class="line">	CPUID</span><br><span class="line">	MOVL	AX, runtime·processorVersionInfo(SB)</span><br><span class="line"></span><br><span class="line">nocpuinfo:</span><br><span class="line">	<span class="comment">// if there is an _cgo_init, call it.</span></span><br><span class="line">	MOVQ	_cgo_init(SB), AX</span><br><span class="line">	TESTQ	AX, AX</span><br><span class="line">	JZ	needtls</span><br><span class="line">	<span class="comment">// g0 already in DI</span></span><br><span class="line">	MOVQ	DI, CX	<span class="comment">// Win64 uses CX for first parameter</span></span><br><span class="line">	MOVQ	$setg_gcc&lt;&gt;(SB), SI</span><br><span class="line">	CALL	AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// update stackguard after _cgo_init</span></span><br><span class="line">	MOVQ	$runtime·g0(SB), CX</span><br><span class="line">	MOVQ	(g_stack+stack_lo)(CX), AX</span><br><span class="line">	ADDQ	$const__StackGuard, AX</span><br><span class="line">	MOVQ	AX, g_stackguard0(CX)</span><br><span class="line">	MOVQ	AX, g_stackguard1(CX)</span><br><span class="line"></span><br><span class="line">#ifndef GOOS_windows</span><br><span class="line">	JMP ok</span><br><span class="line">#endif</span><br><span class="line">needtls:</span><br><span class="line">#ifdef GOOS_plan9</span><br><span class="line">	<span class="comment">// skip TLS setup on Plan 9</span></span><br><span class="line">	JMP ok</span><br><span class="line">#endif</span><br><span class="line">#ifdef GOOS_solaris</span><br><span class="line">	<span class="comment">// skip TLS setup on Solaris</span></span><br><span class="line">	JMP ok</span><br><span class="line">#endif</span><br><span class="line">#ifdef GOOS_darwin</span><br><span class="line">	<span class="comment">// skip TLS setup on Darwin</span></span><br><span class="line">	JMP ok</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">	LEAQ	runtime·m0+m_tls(SB), DI</span><br><span class="line">	CALL	runtime·settls(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// store through it, to make sure it works</span></span><br><span class="line">	get_tls(BX)</span><br><span class="line">	MOVQ	$<span class="number">0x123</span>, g(BX)</span><br><span class="line">	MOVQ	runtime·m0+m_tls(SB), AX</span><br><span class="line">	CMPQ	AX, $<span class="number">0x123</span></span><br><span class="line">	JEQ <span class="number">2</span>(PC)</span><br><span class="line">	CALL	runtime·abort(SB)</span><br><span class="line">ok:</span><br><span class="line">	<span class="comment">// set the per-goroutine and per-mach "registers"</span></span><br><span class="line">	get_tls(BX)</span><br><span class="line">	LEAQ	runtime·g0(SB), CX</span><br><span class="line">	MOVQ	CX, g(BX)</span><br><span class="line">	LEAQ	runtime·m0(SB), AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// save m-&gt;g0 = g0</span></span><br><span class="line">	MOVQ	CX, m_g0(AX)</span><br><span class="line">	<span class="comment">// save m0 to g0-&gt;m</span></span><br><span class="line">	MOVQ	AX, g_m(CX)</span><br><span class="line"></span><br><span class="line">	CLD				<span class="comment">// convention is D is always left cleared</span></span><br><span class="line">	CALL	runtime·check(SB)</span><br><span class="line"></span><br><span class="line">	MOVL	<span class="number">16</span>(SP), AX		<span class="comment">// copy argc</span></span><br><span class="line">	MOVL	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	<span class="number">24</span>(SP), AX		<span class="comment">// copy argv</span></span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)</span><br><span class="line">	CALL	runtime·args(SB)</span><br><span class="line">	CALL	runtime·osinit(SB)</span><br><span class="line">	CALL	runtime·schedinit(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// create a new goroutine to start program</span></span><br><span class="line">	MOVQ	$runtime·mainPC(SB), AX		<span class="comment">// entry</span></span><br><span class="line">	PUSHQ	AX</span><br><span class="line">	PUSHQ	$<span class="number">0</span>			<span class="comment">// arg size</span></span><br><span class="line">	CALL	runtime·newproc(SB)</span><br><span class="line">	POPQ	AX</span><br><span class="line">	POPQ	AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// start this M</span></span><br><span class="line">	CALL	runtime·mstart(SB)</span><br><span class="line"></span><br><span class="line">	CALL	runtime·abort(SB)	<span class="comment">// mstart should never return</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Prevent dead-code elimination of debugCallV1, which is</span></span><br><span class="line">	<span class="comment">// intended to be called by debuggers.</span></span><br><span class="line">	MOVQ	$runtime·debugCallV1(SB), AX</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">DATA	runtime·mainPC+<span class="number">0</span>(SB)/<span class="number">8</span>,$runtime·main(SB)</span><br><span class="line">GLOBL	runtime·mainPC(SB),RODATA,$<span class="number">8</span></span><br><span class="line"></span><br><span class="line">TEXT runtime·breakpoint(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	BYTE	$<span class="number">0xcc</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">TEXT runtime·asminit(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	<span class="comment">// No per-thread init.</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> *  go-routine</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// void gosave(Gobuf*)</span></span><br><span class="line"><span class="comment">// save state in Gobuf; setjmp</span></span><br><span class="line">TEXT runtime·gosave(SB), NOSPLIT, $<span class="number">0</span><span class="number">-8</span></span><br><span class="line">	MOVQ	buf+<span class="number">0</span>(FP), AX		<span class="comment">// gobuf</span></span><br><span class="line">	LEAQ	buf+<span class="number">0</span>(FP), BX		<span class="comment">// caller's SP</span></span><br><span class="line">	MOVQ	BX, gobuf_sp(AX)</span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), BX		<span class="comment">// caller's PC</span></span><br><span class="line">	MOVQ	BX, gobuf_pc(AX)</span><br><span class="line">	MOVQ	$<span class="number">0</span>, gobuf_ret(AX)</span><br><span class="line">	MOVQ	BP, gobuf_bp(AX)</span><br><span class="line">	<span class="comment">// Assert ctxt is zero. See func save.</span></span><br><span class="line">	MOVQ	gobuf_ctxt(AX), BX</span><br><span class="line">	TESTQ	BX, BX</span><br><span class="line">	JZ	<span class="number">2</span>(PC)</span><br><span class="line">	CALL	runtime·badctxt(SB)</span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	MOVQ	BX, gobuf_g(AX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// void gogo(Gobuf*)</span></span><br><span class="line"><span class="comment">// restore state from Gobuf; longjmp</span></span><br><span class="line">TEXT runtime·gogo(SB), NOSPLIT, $<span class="number">16</span><span class="number">-8</span></span><br><span class="line">	MOVQ	buf+<span class="number">0</span>(FP), BX		<span class="comment">// gobuf</span></span><br><span class="line">	MOVQ	gobuf_g(BX), DX</span><br><span class="line">	MOVQ	<span class="number">0</span>(DX), CX		<span class="comment">// make sure g != nil</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	DX, g(CX)</span><br><span class="line">	MOVQ	gobuf_sp(BX), SP	<span class="comment">// restore SP</span></span><br><span class="line">	MOVQ	gobuf_ret(BX), AX</span><br><span class="line">	MOVQ	gobuf_ctxt(BX), DX</span><br><span class="line">	MOVQ	gobuf_bp(BX), BP</span><br><span class="line">	MOVQ	$<span class="number">0</span>, gobuf_sp(BX)	<span class="comment">// clear to help garbage collector</span></span><br><span class="line">	MOVQ	$<span class="number">0</span>, gobuf_ret(BX)</span><br><span class="line">	MOVQ	$<span class="number">0</span>, gobuf_ctxt(BX)</span><br><span class="line">	MOVQ	$<span class="number">0</span>, gobuf_bp(BX)</span><br><span class="line">	MOVQ	gobuf_pc(BX), BX</span><br><span class="line">	JMP	BX</span><br><span class="line"></span><br><span class="line"><span class="comment">// func mcall(fn func(*g))</span></span><br><span class="line"><span class="comment">// Switch to m-&gt;g0's stack, call fn(g).</span></span><br><span class="line"><span class="comment">// Fn must never return. It should gogo(&amp;g-&gt;sched)</span></span><br><span class="line"><span class="comment">// to keep running g.</span></span><br><span class="line">TEXT runtime·mcall(SB), NOSPLIT, $<span class="number">0</span><span class="number">-8</span></span><br><span class="line">	MOVQ	fn+<span class="number">0</span>(FP), DI</span><br><span class="line">	</span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), AX	<span class="comment">// save state in g-&gt;sched</span></span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), BX	<span class="comment">// caller's PC</span></span><br><span class="line">	MOVQ	BX, (g_sched+gobuf_pc)(AX)</span><br><span class="line">	LEAQ	fn+<span class="number">0</span>(FP), BX	<span class="comment">// caller's SP</span></span><br><span class="line">	MOVQ	BX, (g_sched+gobuf_sp)(AX)</span><br><span class="line">	MOVQ	AX, (g_sched+gobuf_g)(AX)</span><br><span class="line">	MOVQ	BP, (g_sched+gobuf_bp)(AX)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// switch to m-&gt;g0 &amp; its stack, call fn</span></span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	MOVQ	g_m(BX), BX</span><br><span class="line">	MOVQ	m_g0(BX), SI</span><br><span class="line">	CMPQ	SI, AX	<span class="comment">// if g == m-&gt;g0 call badmcall</span></span><br><span class="line">	JNE	<span class="number">3</span>(PC)</span><br><span class="line">	MOVQ	$runtime·badmcall(SB), AX</span><br><span class="line">	JMP	AX</span><br><span class="line">	MOVQ	SI, g(CX)	<span class="comment">// g = m-&gt;g0</span></span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(SI), SP	<span class="comment">// sp = m-&gt;g0-&gt;sched.sp</span></span><br><span class="line">	PUSHQ	AX</span><br><span class="line">	MOVQ	DI, DX</span><br><span class="line">	MOVQ	<span class="number">0</span>(DI), DI</span><br><span class="line">	CALL	DI</span><br><span class="line">	POPQ	AX</span><br><span class="line">	MOVQ	$runtime·badmcall2(SB), AX</span><br><span class="line">	JMP	AX</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// systemstack_switch is a dummy routine that systemstack leaves at the bottom</span></span><br><span class="line"><span class="comment">// of the G stack. We need to distinguish the routine that</span></span><br><span class="line"><span class="comment">// lives at the bottom of the G stack from the one that lives</span></span><br><span class="line"><span class="comment">// at the top of the system stack because the one at the top of</span></span><br><span class="line"><span class="comment">// the system stack terminates the stack walk (see topofstack()).</span></span><br><span class="line">TEXT runtime·systemstack_switch(SB), NOSPLIT, $<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// func systemstack(fn func())</span></span><br><span class="line">TEXT runtime·systemstack(SB), NOSPLIT, $<span class="number">0</span><span class="number">-8</span></span><br><span class="line">	MOVQ	fn+<span class="number">0</span>(FP), DI	<span class="comment">// DI = fn</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), AX	<span class="comment">// AX = g</span></span><br><span class="line">	MOVQ	g_m(AX), BX	<span class="comment">// BX = m</span></span><br><span class="line"></span><br><span class="line">	CMPQ	AX, m_gsignal(BX)</span><br><span class="line">	JEQ	noswitch</span><br><span class="line"></span><br><span class="line">	MOVQ	m_g0(BX), DX	<span class="comment">// DX = g0</span></span><br><span class="line">	CMPQ	AX, DX</span><br><span class="line">	JEQ	noswitch</span><br><span class="line"></span><br><span class="line">	CMPQ	AX, m_curg(BX)</span><br><span class="line">	JNE	bad</span><br><span class="line"></span><br><span class="line">	<span class="comment">// switch stacks</span></span><br><span class="line">	<span class="comment">// save our state in g-&gt;sched. Pretend to</span></span><br><span class="line">	<span class="comment">// be systemstack_switch if the G stack is scanned.</span></span><br><span class="line">	MOVQ	$runtime·systemstack_switch(SB), SI</span><br><span class="line">	MOVQ	SI, (g_sched+gobuf_pc)(AX)</span><br><span class="line">	MOVQ	SP, (g_sched+gobuf_sp)(AX)</span><br><span class="line">	MOVQ	AX, (g_sched+gobuf_g)(AX)</span><br><span class="line">	MOVQ	BP, (g_sched+gobuf_bp)(AX)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// switch to g0</span></span><br><span class="line">	MOVQ	DX, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(DX), BX</span><br><span class="line">	<span class="comment">// make it look like mstart called systemstack on g0, to stop traceback</span></span><br><span class="line">	SUBQ	$<span class="number">8</span>, BX</span><br><span class="line">	MOVQ	$runtime·mstart(SB), DX</span><br><span class="line">	MOVQ	DX, <span class="number">0</span>(BX)</span><br><span class="line">	MOVQ	BX, SP</span><br><span class="line"></span><br><span class="line">	<span class="comment">// call target function</span></span><br><span class="line">	MOVQ	DI, DX</span><br><span class="line">	MOVQ	<span class="number">0</span>(DI), DI</span><br><span class="line">	CALL	DI</span><br><span class="line"></span><br><span class="line">	<span class="comment">// switch back to g</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), AX</span><br><span class="line">	MOVQ	g_m(AX), BX</span><br><span class="line">	MOVQ	m_curg(BX), AX</span><br><span class="line">	MOVQ	AX, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(AX), SP</span><br><span class="line">	MOVQ	$<span class="number">0</span>, (g_sched+gobuf_sp)(AX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">noswitch:</span><br><span class="line">	<span class="comment">// already on m stack; tail call the function</span></span><br><span class="line">	<span class="comment">// Using a tail call here cleans up tracebacks since we won't stop</span></span><br><span class="line">	<span class="comment">// at an intermediate systemstack.</span></span><br><span class="line">	MOVQ	DI, DX</span><br><span class="line">	MOVQ	<span class="number">0</span>(DI), DI</span><br><span class="line">	JMP	DI</span><br><span class="line"></span><br><span class="line">bad:</span><br><span class="line">	<span class="comment">// Bad: g is not gsignal, not g0, not curg. What is it?</span></span><br><span class="line">	MOVQ	$runtime·badsystemstack(SB), AX</span><br><span class="line">	CALL	AX</span><br><span class="line">	INT	$<span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * support for morestack</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Called during function prolog when more stack is needed.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The traceback routines see morestack on a g0 as being</span></span><br><span class="line"><span class="comment">// the top of a stack (for example, morestack calling newstack</span></span><br><span class="line"><span class="comment">// calling the scheduler calling newm calling gc), so we must</span></span><br><span class="line"><span class="comment">// record an argument size. For that purpose, it has no arguments.</span></span><br><span class="line">TEXT runtime·morestack(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	<span class="comment">// Cannot grow scheduler stack (m-&gt;g0).</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	MOVQ	g_m(BX), BX</span><br><span class="line">	MOVQ	m_g0(BX), SI</span><br><span class="line">	CMPQ	g(CX), SI</span><br><span class="line">	JNE	<span class="number">3</span>(PC)</span><br><span class="line">	CALL	runtime·badmorestackg0(SB)</span><br><span class="line">	CALL	runtime·abort(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Cannot grow signal stack (m-&gt;gsignal).</span></span><br><span class="line">	MOVQ	m_gsignal(BX), SI</span><br><span class="line">	CMPQ	g(CX), SI</span><br><span class="line">	JNE	<span class="number">3</span>(PC)</span><br><span class="line">	CALL	runtime·badmorestackgsignal(SB)</span><br><span class="line">	CALL	runtime·abort(SB)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Called from f.</span></span><br><span class="line">	<span class="comment">// Set m-&gt;morebuf to f's caller.</span></span><br><span class="line">	MOVQ	<span class="number">8</span>(SP), AX	<span class="comment">// f's caller's PC</span></span><br><span class="line">	MOVQ	AX, (m_morebuf+gobuf_pc)(BX)</span><br><span class="line">	LEAQ	<span class="number">16</span>(SP), AX	<span class="comment">// f's caller's SP</span></span><br><span class="line">	MOVQ	AX, (m_morebuf+gobuf_sp)(BX)</span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), SI</span><br><span class="line">	MOVQ	SI, (m_morebuf+gobuf_g)(BX)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Set g-&gt;sched to context in f.</span></span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), AX <span class="comment">// f's PC</span></span><br><span class="line">	MOVQ	AX, (g_sched+gobuf_pc)(SI)</span><br><span class="line">	MOVQ	SI, (g_sched+gobuf_g)(SI)</span><br><span class="line">	LEAQ	<span class="number">8</span>(SP), AX <span class="comment">// f's SP</span></span><br><span class="line">	MOVQ	AX, (g_sched+gobuf_sp)(SI)</span><br><span class="line">	MOVQ	BP, (g_sched+gobuf_bp)(SI)</span><br><span class="line">	MOVQ	DX, (g_sched+gobuf_ctxt)(SI)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Call newstack on m-&gt;g0's stack.</span></span><br><span class="line">	MOVQ	m_g0(BX), BX</span><br><span class="line">	MOVQ	BX, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(BX), SP</span><br><span class="line">	CALL	runtime·newstack(SB)</span><br><span class="line">	CALL	runtime·abort(SB)	<span class="comment">// crash if newstack returns</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// morestack but not preserving ctxt.</span></span><br><span class="line">TEXT runtime·morestack_noctxt(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	MOVL	$<span class="number">0</span>, DX</span><br><span class="line">	JMP	runtime·morestack(SB)</span><br><span class="line"></span><br><span class="line"><span class="comment">// reflectcall: call a function with the given argument list</span></span><br><span class="line"><span class="comment">// func call(argtype *_type, f *FuncVal, arg *byte, argsize, retoffset uint32).</span></span><br><span class="line"><span class="comment">// we don't have variable-sized frames, so we use a small number</span></span><br><span class="line"><span class="comment">// of constant-sized-frame functions to encode a few bits of size in the pc.</span></span><br><span class="line"><span class="comment">// Caution: ugly multiline assembly macros in your future!</span></span><br><span class="line"></span><br><span class="line">#define DISPATCH(NAME,MAXSIZE)		\</span><br><span class="line">	CMPQ	CX, $MAXSIZE;		\</span><br><span class="line">	JA	<span class="number">3</span>(PC);			\</span><br><span class="line">	MOVQ	$NAME(SB), AX;		\</span><br><span class="line">	JMP	AX</span><br><span class="line"><span class="comment">// Note: can't just "JMP NAME(SB)" - bad inlining results.</span></span><br><span class="line"></span><br><span class="line">TEXT reflect·call(SB), NOSPLIT, $<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	JMP	·reflectcall(SB)</span><br><span class="line"></span><br><span class="line">TEXT ·reflectcall(SB), NOSPLIT, $<span class="number">0</span><span class="number">-32</span></span><br><span class="line">	MOVLQZX argsize+<span class="number">24</span>(FP), CX</span><br><span class="line">	DISPATCH(runtime·call32, <span class="number">32</span>)</span><br><span class="line">	DISPATCH(runtime·call64, <span class="number">64</span>)</span><br><span class="line">	DISPATCH(runtime·call128, <span class="number">128</span>)</span><br><span class="line">	DISPATCH(runtime·call256, <span class="number">256</span>)</span><br><span class="line">	DISPATCH(runtime·call512, <span class="number">512</span>)</span><br><span class="line">	DISPATCH(runtime·call1024, <span class="number">1024</span>)</span><br><span class="line">	DISPATCH(runtime·call2048, <span class="number">2048</span>)</span><br><span class="line">	DISPATCH(runtime·call4096, <span class="number">4096</span>)</span><br><span class="line">	DISPATCH(runtime·call8192, <span class="number">8192</span>)</span><br><span class="line">	DISPATCH(runtime·call16384, <span class="number">16384</span>)</span><br><span class="line">	DISPATCH(runtime·call32768, <span class="number">32768</span>)</span><br><span class="line">	DISPATCH(runtime·call65536, <span class="number">65536</span>)</span><br><span class="line">	DISPATCH(runtime·call131072, <span class="number">131072</span>)</span><br><span class="line">	DISPATCH(runtime·call262144, <span class="number">262144</span>)</span><br><span class="line">	DISPATCH(runtime·call524288, <span class="number">524288</span>)</span><br><span class="line">	DISPATCH(runtime·call1048576, <span class="number">1048576</span>)</span><br><span class="line">	DISPATCH(runtime·call2097152, <span class="number">2097152</span>)</span><br><span class="line">	DISPATCH(runtime·call4194304, <span class="number">4194304</span>)</span><br><span class="line">	DISPATCH(runtime·call8388608, <span class="number">8388608</span>)</span><br><span class="line">	DISPATCH(runtime·call16777216, <span class="number">16777216</span>)</span><br><span class="line">	DISPATCH(runtime·call33554432, <span class="number">33554432</span>)</span><br><span class="line">	DISPATCH(runtime·call67108864, <span class="number">67108864</span>)</span><br><span class="line">	DISPATCH(runtime·call134217728, <span class="number">134217728</span>)</span><br><span class="line">	DISPATCH(runtime·call268435456, <span class="number">268435456</span>)</span><br><span class="line">	DISPATCH(runtime·call536870912, <span class="number">536870912</span>)</span><br><span class="line">	DISPATCH(runtime·call1073741824, <span class="number">1073741824</span>)</span><br><span class="line">	MOVQ	$runtime·badreflectcall(SB), AX</span><br><span class="line">	JMP	AX</span><br><span class="line"></span><br><span class="line">#define CALLFN(NAME,MAXSIZE)			\</span><br><span class="line">TEXT NAME(SB), WRAPPER, $MAXSIZE<span class="number">-32</span>;		\</span><br><span class="line">	NO_LOCAL_POINTERS;			\</span><br><span class="line">	<span class="comment">/* copy arguments to stack */</span>		\</span><br><span class="line">	MOVQ	argptr+<span class="number">16</span>(FP), SI;		\</span><br><span class="line">	MOVLQZX argsize+<span class="number">24</span>(FP), CX;		\</span><br><span class="line">	MOVQ	SP, DI;				\</span><br><span class="line">	REP;MOVSB;				\</span><br><span class="line">	<span class="comment">/* call function */</span>			\</span><br><span class="line">	MOVQ	f+<span class="number">8</span>(FP), DX;			\</span><br><span class="line">	PCDATA  $PCDATA_StackMapIndex, $<span class="number">0</span>;	\</span><br><span class="line">	CALL	(DX);				\</span><br><span class="line">	<span class="comment">/* copy return values back */</span>		\</span><br><span class="line">	MOVQ	argtype+<span class="number">0</span>(FP), DX;		\</span><br><span class="line">	MOVQ	argptr+<span class="number">16</span>(FP), DI;		\</span><br><span class="line">	MOVLQZX	argsize+<span class="number">24</span>(FP), CX;		\</span><br><span class="line">	MOVLQZX	retoffset+<span class="number">28</span>(FP), BX;		\</span><br><span class="line">	MOVQ	SP, SI;				\</span><br><span class="line">	ADDQ	BX, DI;				\</span><br><span class="line">	ADDQ	BX, SI;				\</span><br><span class="line">	SUBQ	BX, CX;				\</span><br><span class="line">	CALL	callRet&lt;&gt;(SB);			\</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// callRet copies return values back at the end of call*. This is a</span></span><br><span class="line"><span class="comment">// separate function so it can allocate stack space for the arguments</span></span><br><span class="line"><span class="comment">// to reflectcallmove. It does not follow the Go ABI; it expects its</span></span><br><span class="line"><span class="comment">// arguments in registers.</span></span><br><span class="line">TEXT callRet&lt;&gt;(SB), NOSPLIT, $<span class="number">32</span><span class="number">-0</span></span><br><span class="line">	NO_LOCAL_POINTERS</span><br><span class="line">	MOVQ	DX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	DI, <span class="number">8</span>(SP)</span><br><span class="line">	MOVQ	SI, <span class="number">16</span>(SP)</span><br><span class="line">	MOVQ	CX, <span class="number">24</span>(SP)</span><br><span class="line">	CALL	runtime·reflectcallmove(SB)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">CALLFN(·call32, <span class="number">32</span>)</span><br><span class="line">CALLFN(·call64, <span class="number">64</span>)</span><br><span class="line">CALLFN(·call128, <span class="number">128</span>)</span><br><span class="line">CALLFN(·call256, <span class="number">256</span>)</span><br><span class="line">CALLFN(·call512, <span class="number">512</span>)</span><br><span class="line">CALLFN(·call1024, <span class="number">1024</span>)</span><br><span class="line">CALLFN(·call2048, <span class="number">2048</span>)</span><br><span class="line">CALLFN(·call4096, <span class="number">4096</span>)</span><br><span class="line">CALLFN(·call8192, <span class="number">8192</span>)</span><br><span class="line">CALLFN(·call16384, <span class="number">16384</span>)</span><br><span class="line">CALLFN(·call32768, <span class="number">32768</span>)</span><br><span class="line">CALLFN(·call65536, <span class="number">65536</span>)</span><br><span class="line">CALLFN(·call131072, <span class="number">131072</span>)</span><br><span class="line">CALLFN(·call262144, <span class="number">262144</span>)</span><br><span class="line">CALLFN(·call524288, <span class="number">524288</span>)</span><br><span class="line">CALLFN(·call1048576, <span class="number">1048576</span>)</span><br><span class="line">CALLFN(·call2097152, <span class="number">2097152</span>)</span><br><span class="line">CALLFN(·call4194304, <span class="number">4194304</span>)</span><br><span class="line">CALLFN(·call8388608, <span class="number">8388608</span>)</span><br><span class="line">CALLFN(·call16777216, <span class="number">16777216</span>)</span><br><span class="line">CALLFN(·call33554432, <span class="number">33554432</span>)</span><br><span class="line">CALLFN(·call67108864, <span class="number">67108864</span>)</span><br><span class="line">CALLFN(·call134217728, <span class="number">134217728</span>)</span><br><span class="line">CALLFN(·call268435456, <span class="number">268435456</span>)</span><br><span class="line">CALLFN(·call536870912, <span class="number">536870912</span>)</span><br><span class="line">CALLFN(·call1073741824, <span class="number">1073741824</span>)</span><br><span class="line"></span><br><span class="line">TEXT runtime·procyield(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	MOVL	cycles+<span class="number">0</span>(FP), AX</span><br><span class="line">again:</span><br><span class="line">	PAUSE</span><br><span class="line">	SUBL	$<span class="number">1</span>, AX</span><br><span class="line">	JNZ	again</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TEXT ·publicationBarrier(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	<span class="comment">// Stores are already ordered on x86, so this is just a</span></span><br><span class="line">	<span class="comment">// compile barrier.</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// void jmpdefer(fn, sp);</span></span><br><span class="line"><span class="comment">// called from deferreturn.</span></span><br><span class="line"><span class="comment">// 1. pop the caller</span></span><br><span class="line"><span class="comment">// 2. sub 5 bytes from the callers return</span></span><br><span class="line"><span class="comment">// 3. jmp to the argument</span></span><br><span class="line">TEXT runtime·jmpdefer(SB), NOSPLIT, $<span class="number">0</span><span class="number">-16</span></span><br><span class="line">	MOVQ	fv+<span class="number">0</span>(FP), DX	<span class="comment">// fn</span></span><br><span class="line">	MOVQ	argp+<span class="number">8</span>(FP), BX	<span class="comment">// caller sp</span></span><br><span class="line">	LEAQ	<span class="number">-8</span>(BX), SP	<span class="comment">// caller sp after CALL</span></span><br><span class="line">	MOVQ	<span class="number">-8</span>(SP), BP	<span class="comment">// restore BP as if deferreturn returned (harmless if framepointers not in use)</span></span><br><span class="line">	SUBQ	$<span class="number">5</span>, (SP)	<span class="comment">// return to CALL again</span></span><br><span class="line">	MOVQ	<span class="number">0</span>(DX), BX</span><br><span class="line">	JMP	BX	<span class="comment">// but first run the deferred function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Save state of caller into g-&gt;sched. Smashes R8, R9.</span></span><br><span class="line">TEXT gosave&lt;&gt;(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	get_tls(R8)</span><br><span class="line">	MOVQ	g(R8), R8</span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), R9</span><br><span class="line">	MOVQ	R9, (g_sched+gobuf_pc)(R8)</span><br><span class="line">	LEAQ	<span class="number">8</span>(SP), R9</span><br><span class="line">	MOVQ	R9, (g_sched+gobuf_sp)(R8)</span><br><span class="line">	MOVQ	$<span class="number">0</span>, (g_sched+gobuf_ret)(R8)</span><br><span class="line">	MOVQ	BP, (g_sched+gobuf_bp)(R8)</span><br><span class="line">	<span class="comment">// Assert ctxt is zero. See func save.</span></span><br><span class="line">	MOVQ	(g_sched+gobuf_ctxt)(R8), R9</span><br><span class="line">	TESTQ	R9, R9</span><br><span class="line">	JZ	<span class="number">2</span>(PC)</span><br><span class="line">	CALL	runtime·badctxt(SB)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// func asmcgocall(fn, arg unsafe.Pointer) int32</span></span><br><span class="line"><span class="comment">// Call fn(arg) on the scheduler stack,</span></span><br><span class="line"><span class="comment">// aligned appropriately for the gcc ABI.</span></span><br><span class="line"><span class="comment">// See cgocall.go for more details.</span></span><br><span class="line">TEXT ·asmcgocall(SB),NOSPLIT,$<span class="number">0</span><span class="number">-20</span></span><br><span class="line">	MOVQ	fn+<span class="number">0</span>(FP), AX</span><br><span class="line">	MOVQ	arg+<span class="number">8</span>(FP), BX</span><br><span class="line"></span><br><span class="line">	MOVQ	SP, DX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Figure out if we need to switch to m-&gt;g0 stack.</span></span><br><span class="line">	<span class="comment">// We get called to create new OS threads too, and those</span></span><br><span class="line">	<span class="comment">// come in on the m-&gt;g0 stack already.</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), R8</span><br><span class="line">	CMPQ	R8, $<span class="number">0</span></span><br><span class="line">	JEQ	nosave</span><br><span class="line">	MOVQ	g_m(R8), R8</span><br><span class="line">	MOVQ	m_g0(R8), SI</span><br><span class="line">	MOVQ	g(CX), DI</span><br><span class="line">	CMPQ	SI, DI</span><br><span class="line">	JEQ	nosave</span><br><span class="line">	MOVQ	m_gsignal(R8), SI</span><br><span class="line">	CMPQ	SI, DI</span><br><span class="line">	JEQ	nosave</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Switch to system stack.</span></span><br><span class="line">	MOVQ	m_g0(R8), SI</span><br><span class="line">	CALL	gosave&lt;&gt;(SB)</span><br><span class="line">	MOVQ	SI, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(SI), SP</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Now on a scheduling stack (a pthread-created stack).</span></span><br><span class="line">	<span class="comment">// Make sure we have enough room for 4 stack-backed fast-call</span></span><br><span class="line">	<span class="comment">// registers as per windows amd64 calling convention.</span></span><br><span class="line">	SUBQ	$<span class="number">64</span>, SP</span><br><span class="line">	ANDQ	$~<span class="number">15</span>, SP	<span class="comment">// alignment for gcc ABI</span></span><br><span class="line">	MOVQ	DI, <span class="number">48</span>(SP)	<span class="comment">// save g</span></span><br><span class="line">	MOVQ	(g_stack+stack_hi)(DI), DI</span><br><span class="line">	SUBQ	DX, DI</span><br><span class="line">	MOVQ	DI, <span class="number">40</span>(SP)	<span class="comment">// save depth in stack (can't just save SP, as stack might be copied during a callback)</span></span><br><span class="line">	MOVQ	BX, DI		<span class="comment">// DI = first argument in AMD64 ABI</span></span><br><span class="line">	MOVQ	BX, CX		<span class="comment">// CX = first argument in Win64</span></span><br><span class="line">	CALL	AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Restore registers, g, stack pointer.</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	<span class="number">48</span>(SP), DI</span><br><span class="line">	MOVQ	(g_stack+stack_hi)(DI), SI</span><br><span class="line">	SUBQ	<span class="number">40</span>(SP), SI</span><br><span class="line">	MOVQ	DI, g(CX)</span><br><span class="line">	MOVQ	SI, SP</span><br><span class="line"></span><br><span class="line">	MOVL	AX, ret+<span class="number">16</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">nosave:</span><br><span class="line">	<span class="comment">// Running on a system stack, perhaps even without a g.</span></span><br><span class="line">	<span class="comment">// Having no g can happen during thread creation or thread teardown</span></span><br><span class="line">	<span class="comment">// (see needm/dropm on Solaris, for example).</span></span><br><span class="line">	<span class="comment">// This code is like the above sequence but without saving/restoring g</span></span><br><span class="line">	<span class="comment">// and without worrying about the stack moving out from under us</span></span><br><span class="line">	<span class="comment">// (because we're on a system stack, not a goroutine stack).</span></span><br><span class="line">	<span class="comment">// The above code could be used directly if already on a system stack,</span></span><br><span class="line">	<span class="comment">// but then the only path through this code would be a rare case on Solaris.</span></span><br><span class="line">	<span class="comment">// Using this code for all "already on system stack" calls exercises it more,</span></span><br><span class="line">	<span class="comment">// which should help keep it correct.</span></span><br><span class="line">	SUBQ	$<span class="number">64</span>, SP</span><br><span class="line">	ANDQ	$~<span class="number">15</span>, SP</span><br><span class="line">	MOVQ	$<span class="number">0</span>, <span class="number">48</span>(SP)		<span class="comment">// where above code stores g, in case someone looks during debugging</span></span><br><span class="line">	MOVQ	DX, <span class="number">40</span>(SP)	<span class="comment">// save original stack pointer</span></span><br><span class="line">	MOVQ	BX, DI		<span class="comment">// DI = first argument in AMD64 ABI</span></span><br><span class="line">	MOVQ	BX, CX		<span class="comment">// CX = first argument in Win64</span></span><br><span class="line">	CALL	AX</span><br><span class="line">	MOVQ	<span class="number">40</span>(SP), SI	<span class="comment">// restore original stack pointer</span></span><br><span class="line">	MOVQ	SI, SP</span><br><span class="line">	MOVL	AX, ret+<span class="number">16</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// cgocallback(void (*fn)(void*), void *frame, uintptr framesize, uintptr ctxt)</span></span><br><span class="line"><span class="comment">// Turn the fn into a Go func (by taking its address) and call</span></span><br><span class="line"><span class="comment">// cgocallback_gofunc.</span></span><br><span class="line">TEXT runtime·cgocallback(SB),NOSPLIT,$<span class="number">32</span><span class="number">-32</span></span><br><span class="line">	LEAQ	fn+<span class="number">0</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	frame+<span class="number">8</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)</span><br><span class="line">	MOVQ	framesize+<span class="number">16</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">16</span>(SP)</span><br><span class="line">	MOVQ	ctxt+<span class="number">24</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">24</span>(SP)</span><br><span class="line">	MOVQ	$runtime·cgocallback_gofunc(SB), AX</span><br><span class="line">	CALL	AX</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// cgocallback_gofunc(FuncVal*, void *frame, uintptr framesize, uintptr ctxt)</span></span><br><span class="line"><span class="comment">// See cgocall.go for more details.</span></span><br><span class="line">TEXT ·cgocallback_gofunc(SB),NOSPLIT,$<span class="number">16</span><span class="number">-32</span></span><br><span class="line">	NO_LOCAL_POINTERS</span><br><span class="line"></span><br><span class="line">	<span class="comment">// If g is nil, Go did not create the current thread.</span></span><br><span class="line">	<span class="comment">// Call needm to obtain one m for temporary use.</span></span><br><span class="line">	<span class="comment">// In this case, we're running on the thread stack, so there's</span></span><br><span class="line">	<span class="comment">// lots of space, but the linker doesn't know. Hide the call from</span></span><br><span class="line">	<span class="comment">// the linker analysis by using an indirect call through AX.</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">#ifdef GOOS_windows</span><br><span class="line">	MOVL	$<span class="number">0</span>, BX</span><br><span class="line">	CMPQ	CX, $<span class="number">0</span></span><br><span class="line">	JEQ	<span class="number">2</span>(PC)</span><br><span class="line">#endif</span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	CMPQ	BX, $<span class="number">0</span></span><br><span class="line">	JEQ	needm</span><br><span class="line">	MOVQ	g_m(BX), BX</span><br><span class="line">	MOVQ	BX, R8 <span class="comment">// holds oldm until end of function</span></span><br><span class="line">	JMP	havem</span><br><span class="line">needm:</span><br><span class="line">	MOVQ	$<span class="number">0</span>, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	$runtime·needm(SB), AX</span><br><span class="line">	CALL	AX</span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), R8</span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	MOVQ	g_m(BX), BX</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// Set m-&gt;sched.sp = SP, so that if a panic happens</span></span><br><span class="line">	<span class="comment">// during the function we are about to execute, it will</span></span><br><span class="line">	<span class="comment">// have a valid SP to run on the g0 stack.</span></span><br><span class="line">	<span class="comment">// The next few lines (after the havem label)</span></span><br><span class="line">	<span class="comment">// will save this SP onto the stack and then write</span></span><br><span class="line">	<span class="comment">// the same SP back to m-&gt;sched.sp. That seems redundant,</span></span><br><span class="line">	<span class="comment">// but if an unrecovered panic happens, unwindm will</span></span><br><span class="line">	<span class="comment">// restore the g-&gt;sched.sp from the stack location</span></span><br><span class="line">	<span class="comment">// and then systemstack will try to use it. If we don't set it here,</span></span><br><span class="line">	<span class="comment">// that restored SP will be uninitialized (typically 0) and</span></span><br><span class="line">	<span class="comment">// will not be usable.</span></span><br><span class="line">	MOVQ	m_g0(BX), SI</span><br><span class="line">	MOVQ	SP, (g_sched+gobuf_sp)(SI)</span><br><span class="line"></span><br><span class="line">havem:</span><br><span class="line">	<span class="comment">// Now there's a valid m, and we're running on its m-&gt;g0.</span></span><br><span class="line">	<span class="comment">// Save current m-&gt;g0-&gt;sched.sp on stack and then set it to SP.</span></span><br><span class="line">	<span class="comment">// Save current sp in m-&gt;g0-&gt;sched.sp in preparation for</span></span><br><span class="line">	<span class="comment">// switch back to m-&gt;curg stack.</span></span><br><span class="line">	<span class="comment">// <span class="doctag">NOTE:</span> unwindm knows that the saved g-&gt;sched.sp is at 0(SP).</span></span><br><span class="line">	MOVQ	m_g0(BX), SI</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(SI), AX</span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	SP, (g_sched+gobuf_sp)(SI)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Switch to m-&gt;curg stack and call runtime.cgocallbackg.</span></span><br><span class="line">	<span class="comment">// Because we are taking over the execution of m-&gt;curg</span></span><br><span class="line">	<span class="comment">// but *not* resuming what had been running, we need to</span></span><br><span class="line">	<span class="comment">// save that information (m-&gt;curg-&gt;sched) so we can restore it.</span></span><br><span class="line">	<span class="comment">// We can restore m-&gt;curg-&gt;sched.sp easily, because calling</span></span><br><span class="line">	<span class="comment">// runtime.cgocallbackg leaves SP unchanged upon return.</span></span><br><span class="line">	<span class="comment">// To save m-&gt;curg-&gt;sched.pc, we push it onto the stack.</span></span><br><span class="line">	<span class="comment">// This has the added benefit that it looks to the traceback</span></span><br><span class="line">	<span class="comment">// routine like cgocallbackg is going to return to that</span></span><br><span class="line">	<span class="comment">// PC (because the frame we allocate below has the same</span></span><br><span class="line">	<span class="comment">// size as cgocallback_gofunc's frame declared above)</span></span><br><span class="line">	<span class="comment">// so that the traceback will seamlessly trace back into</span></span><br><span class="line">	<span class="comment">// the earlier calls.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// In the new goroutine, 8(SP) holds the saved R8.</span></span><br><span class="line">	MOVQ	m_curg(BX), SI</span><br><span class="line">	MOVQ	SI, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(SI), DI  <span class="comment">// prepare stack as DI</span></span><br><span class="line">	MOVQ	(g_sched+gobuf_pc)(SI), BX</span><br><span class="line">	MOVQ	BX, <span class="number">-8</span>(DI)</span><br><span class="line">	<span class="comment">// Compute the size of the frame, including return PC and, if</span></span><br><span class="line">	<span class="comment">// GOEXPERIMENT=framepointer, the saved base pointer</span></span><br><span class="line">	MOVQ	ctxt+<span class="number">24</span>(FP), BX</span><br><span class="line">	LEAQ	fv+<span class="number">0</span>(FP), AX</span><br><span class="line">	SUBQ	SP, AX</span><br><span class="line">	SUBQ	AX, DI</span><br><span class="line">	MOVQ	DI, SP</span><br><span class="line"></span><br><span class="line">	MOVQ	R8, <span class="number">8</span>(SP)</span><br><span class="line">	MOVQ	BX, <span class="number">0</span>(SP)</span><br><span class="line">	CALL	runtime·cgocallbackg(SB)</span><br><span class="line">	MOVQ	<span class="number">8</span>(SP), R8</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Compute the size of the frame again. FP and SP have</span></span><br><span class="line">	<span class="comment">// completely different values here than they did above,</span></span><br><span class="line">	<span class="comment">// but only their difference matters.</span></span><br><span class="line">	LEAQ	fv+<span class="number">0</span>(FP), AX</span><br><span class="line">	SUBQ	SP, AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Restore g-&gt;sched (== m-&gt;curg-&gt;sched) from saved values.</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), SI</span><br><span class="line">	MOVQ	SP, DI</span><br><span class="line">	ADDQ	AX, DI</span><br><span class="line">	MOVQ	<span class="number">-8</span>(DI), BX</span><br><span class="line">	MOVQ	BX, (g_sched+gobuf_pc)(SI)</span><br><span class="line">	MOVQ	DI, (g_sched+gobuf_sp)(SI)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Switch back to m-&gt;g0's stack and restore m-&gt;g0-&gt;sched.sp.</span></span><br><span class="line">	<span class="comment">// (Unlike m-&gt;curg, the g0 goroutine never uses sched.pc,</span></span><br><span class="line">	<span class="comment">// so we do not have to restore it.)</span></span><br><span class="line">	MOVQ	g(CX), BX</span><br><span class="line">	MOVQ	g_m(BX), BX</span><br><span class="line">	MOVQ	m_g0(BX), SI</span><br><span class="line">	MOVQ	SI, g(CX)</span><br><span class="line">	MOVQ	(g_sched+gobuf_sp)(SI), SP</span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), AX</span><br><span class="line">	MOVQ	AX, (g_sched+gobuf_sp)(SI)</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// If the m on entry was nil, we called needm above to borrow an m</span></span><br><span class="line">	<span class="comment">// for the duration of the call. Since the call is over, return it with dropm.</span></span><br><span class="line">	CMPQ	R8, $<span class="number">0</span></span><br><span class="line">	JNE <span class="number">3</span>(PC)</span><br><span class="line">	MOVQ	$runtime·dropm(SB), AX</span><br><span class="line">	CALL	AX</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Done!</span></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// void setg(G*); set g. for use by needm.</span></span><br><span class="line">TEXT runtime·setg(SB), NOSPLIT, $<span class="number">0</span><span class="number">-8</span></span><br><span class="line">	MOVQ	gg+<span class="number">0</span>(FP), BX</span><br><span class="line">#ifdef GOOS_windows</span><br><span class="line">	CMPQ	BX, $<span class="number">0</span></span><br><span class="line">	JNE	settls</span><br><span class="line">	MOVQ	$<span class="number">0</span>, <span class="number">0x28</span>(GS)</span><br><span class="line">	RET</span><br><span class="line">settls:</span><br><span class="line">	MOVQ	g_m(BX), AX</span><br><span class="line">	LEAQ	m_tls(AX), AX</span><br><span class="line">	MOVQ	AX, <span class="number">0x28</span>(GS)</span><br><span class="line">#endif</span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	BX, g(CX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// void setg_gcc(G*); set g called from gcc.</span></span><br><span class="line">TEXT setg_gcc&lt;&gt;(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	get_tls(AX)</span><br><span class="line">	MOVQ	DI, g(AX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">TEXT runtime·abort(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	INT	$<span class="number">3</span></span><br><span class="line">loop:</span><br><span class="line">	JMP	loop</span><br><span class="line"></span><br><span class="line"><span class="comment">// check that SP is in range [g-&gt;stack.lo, g-&gt;stack.hi)</span></span><br><span class="line">TEXT runtime·stackcheck(SB), NOSPLIT, $<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), AX</span><br><span class="line">	CMPQ	(g_stack+stack_hi)(AX), SP</span><br><span class="line">	JHI	<span class="number">2</span>(PC)</span><br><span class="line">	CALL	runtime·abort(SB)</span><br><span class="line">	CMPQ	SP, (g_stack+stack_lo)(AX)</span><br><span class="line">	JHI	<span class="number">2</span>(PC)</span><br><span class="line">	CALL	runtime·abort(SB)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// func cputicks() int64</span></span><br><span class="line">TEXT runtime·cputicks(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	CMPB	runtime·lfenceBeforeRdtsc(SB), $<span class="number">1</span></span><br><span class="line">	JNE	mfence</span><br><span class="line">	LFENCE</span><br><span class="line">	JMP	done</span><br><span class="line">mfence:</span><br><span class="line">	MFENCE</span><br><span class="line">done:</span><br><span class="line">	RDTSC</span><br><span class="line">	SHLQ	$<span class="number">32</span>, DX</span><br><span class="line">	ADDQ	DX, AX</span><br><span class="line">	MOVQ	AX, ret+<span class="number">0</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// hash function using AES hardware instructions</span></span><br><span class="line">TEXT runtime·aeshash(SB),NOSPLIT,$<span class="number">0</span><span class="number">-32</span></span><br><span class="line">	MOVQ	p+<span class="number">0</span>(FP), AX	<span class="comment">// ptr to data</span></span><br><span class="line">	MOVQ	s+<span class="number">16</span>(FP), CX	<span class="comment">// size</span></span><br><span class="line">	LEAQ	ret+<span class="number">24</span>(FP), DX</span><br><span class="line">	JMP	runtime·aeshashbody(SB)</span><br><span class="line"></span><br><span class="line">TEXT runtime·aeshashstr(SB),NOSPLIT,$<span class="number">0</span><span class="number">-24</span></span><br><span class="line">	MOVQ	p+<span class="number">0</span>(FP), AX	<span class="comment">// ptr to string struct</span></span><br><span class="line">	MOVQ	<span class="number">8</span>(AX), CX	<span class="comment">// length of string</span></span><br><span class="line">	MOVQ	(AX), AX	<span class="comment">// string data</span></span><br><span class="line">	LEAQ	ret+<span class="number">16</span>(FP), DX</span><br><span class="line">	JMP	runtime·aeshashbody(SB)</span><br><span class="line"></span><br><span class="line"><span class="comment">// AX: data</span></span><br><span class="line"><span class="comment">// CX: length</span></span><br><span class="line"><span class="comment">// DX: address to put return value</span></span><br><span class="line">TEXT runtime·aeshashbody(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	<span class="comment">// Fill an SSE register with our seeds.</span></span><br><span class="line">	MOVQ	h+<span class="number">8</span>(FP), X0			<span class="comment">// 64 bits of per-table hash seed</span></span><br><span class="line">	PINSRW	$<span class="number">4</span>, CX, X0			<span class="comment">// 16 bits of length</span></span><br><span class="line">	PSHUFHW $<span class="number">0</span>, X0, X0			<span class="comment">// repeat length 4 times total</span></span><br><span class="line">	MOVO	X0, X1				<span class="comment">// save unscrambled seed</span></span><br><span class="line">	PXOR	runtime·aeskeysched(SB), X0	<span class="comment">// xor in per-process seed</span></span><br><span class="line">	AESENC	X0, X0				<span class="comment">// scramble seed</span></span><br><span class="line"></span><br><span class="line">	CMPQ	CX, $<span class="number">16</span></span><br><span class="line">	JB	aes0to15</span><br><span class="line">	JE	aes16</span><br><span class="line">	CMPQ	CX, $<span class="number">32</span></span><br><span class="line">	JBE	aes17to32</span><br><span class="line">	CMPQ	CX, $<span class="number">64</span></span><br><span class="line">	JBE	aes33to64</span><br><span class="line">	CMPQ	CX, $<span class="number">128</span></span><br><span class="line">	JBE	aes65to128</span><br><span class="line">	JMP	aes129plus</span><br><span class="line"></span><br><span class="line">aes0to15:</span><br><span class="line">	TESTQ	CX, CX</span><br><span class="line">	JE	aes0</span><br><span class="line"></span><br><span class="line">	ADDQ	$<span class="number">16</span>, AX</span><br><span class="line">	TESTW	$<span class="number">0xff0</span>, AX</span><br><span class="line">	JE	endofpage</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 16 bytes loaded at this address won't cross</span></span><br><span class="line">	<span class="comment">// a page boundary, so we can load it directly.</span></span><br><span class="line">	MOVOU	<span class="number">-16</span>(AX), X1</span><br><span class="line">	ADDQ	CX, CX</span><br><span class="line">	MOVQ	$masks&lt;&gt;(SB), AX</span><br><span class="line">	PAND	(AX)(CX*<span class="number">8</span>), X1</span><br><span class="line">final1:</span><br><span class="line">	PXOR	X0, X1	<span class="comment">// xor data with seed</span></span><br><span class="line">	AESENC	X1, X1	<span class="comment">// scramble combo 3 times</span></span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	MOVQ	X1, (DX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">endofpage:</span><br><span class="line">	<span class="comment">// address ends in 1111xxxx. Might be up against</span></span><br><span class="line">	<span class="comment">// a page boundary, so load ending at last byte.</span></span><br><span class="line">	<span class="comment">// Then shift bytes down using pshufb.</span></span><br><span class="line">	MOVOU	<span class="number">-32</span>(AX)(CX*<span class="number">1</span>), X1</span><br><span class="line">	ADDQ	CX, CX</span><br><span class="line">	MOVQ	$shifts&lt;&gt;(SB), AX</span><br><span class="line">	PSHUFB	(AX)(CX*<span class="number">8</span>), X1</span><br><span class="line">	JMP	final1</span><br><span class="line"></span><br><span class="line">aes0:</span><br><span class="line">	<span class="comment">// Return scrambled input seed</span></span><br><span class="line">	AESENC	X0, X0</span><br><span class="line">	MOVQ	X0, (DX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">aes16:</span><br><span class="line">	MOVOU	(AX), X1</span><br><span class="line">	JMP	final1</span><br><span class="line"></span><br><span class="line">aes17to32:</span><br><span class="line">	<span class="comment">// make second starting seed</span></span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">16</span>(SB), X1</span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// load data to be hashed</span></span><br><span class="line">	MOVOU	(AX), X2</span><br><span class="line">	MOVOU	<span class="number">-16</span>(AX)(CX*<span class="number">1</span>), X3</span><br><span class="line"></span><br><span class="line">	<span class="comment">// xor with seed</span></span><br><span class="line">	PXOR	X0, X2</span><br><span class="line">	PXOR	X1, X3</span><br><span class="line"></span><br><span class="line">	<span class="comment">// scramble 3 times</span></span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line"></span><br><span class="line">	<span class="comment">// combine results</span></span><br><span class="line">	PXOR	X3, X2</span><br><span class="line">	MOVQ	X2, (DX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">aes33to64:</span><br><span class="line">	<span class="comment">// make 3 more starting seeds</span></span><br><span class="line">	MOVO	X1, X2</span><br><span class="line">	MOVO	X1, X3</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">16</span>(SB), X1</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">32</span>(SB), X2</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">48</span>(SB), X3</span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line">	</span><br><span class="line">	MOVOU	(AX), X4</span><br><span class="line">	MOVOU	<span class="number">16</span>(AX), X5</span><br><span class="line">	MOVOU	<span class="number">-32</span>(AX)(CX*<span class="number">1</span>), X6</span><br><span class="line">	MOVOU	<span class="number">-16</span>(AX)(CX*<span class="number">1</span>), X7</span><br><span class="line"></span><br><span class="line">	PXOR	X0, X4</span><br><span class="line">	PXOR	X1, X5</span><br><span class="line">	PXOR	X2, X6</span><br><span class="line">	PXOR	X3, X7</span><br><span class="line">	</span><br><span class="line">	AESENC	X4, X4</span><br><span class="line">	AESENC	X5, X5</span><br><span class="line">	AESENC	X6, X6</span><br><span class="line">	AESENC	X7, X7</span><br><span class="line">	</span><br><span class="line">	AESENC	X4, X4</span><br><span class="line">	AESENC	X5, X5</span><br><span class="line">	AESENC	X6, X6</span><br><span class="line">	AESENC	X7, X7</span><br><span class="line">	</span><br><span class="line">	AESENC	X4, X4</span><br><span class="line">	AESENC	X5, X5</span><br><span class="line">	AESENC	X6, X6</span><br><span class="line">	AESENC	X7, X7</span><br><span class="line"></span><br><span class="line">	PXOR	X6, X4</span><br><span class="line">	PXOR	X7, X5</span><br><span class="line">	PXOR	X5, X4</span><br><span class="line">	MOVQ	X4, (DX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">aes65to128:</span><br><span class="line">	<span class="comment">// make 7 more starting seeds</span></span><br><span class="line">	MOVO	X1, X2</span><br><span class="line">	MOVO	X1, X3</span><br><span class="line">	MOVO	X1, X4</span><br><span class="line">	MOVO	X1, X5</span><br><span class="line">	MOVO	X1, X6</span><br><span class="line">	MOVO	X1, X7</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">16</span>(SB), X1</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">32</span>(SB), X2</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">48</span>(SB), X3</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">64</span>(SB), X4</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">80</span>(SB), X5</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">96</span>(SB), X6</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">112</span>(SB), X7</span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line">	AESENC	X4, X4</span><br><span class="line">	AESENC	X5, X5</span><br><span class="line">	AESENC	X6, X6</span><br><span class="line">	AESENC	X7, X7</span><br><span class="line"></span><br><span class="line">	<span class="comment">// load data</span></span><br><span class="line">	MOVOU	(AX), X8</span><br><span class="line">	MOVOU	<span class="number">16</span>(AX), X9</span><br><span class="line">	MOVOU	<span class="number">32</span>(AX), X10</span><br><span class="line">	MOVOU	<span class="number">48</span>(AX), X11</span><br><span class="line">	MOVOU	<span class="number">-64</span>(AX)(CX*<span class="number">1</span>), X12</span><br><span class="line">	MOVOU	<span class="number">-48</span>(AX)(CX*<span class="number">1</span>), X13</span><br><span class="line">	MOVOU	<span class="number">-32</span>(AX)(CX*<span class="number">1</span>), X14</span><br><span class="line">	MOVOU	<span class="number">-16</span>(AX)(CX*<span class="number">1</span>), X15</span><br><span class="line"></span><br><span class="line">	<span class="comment">// xor with seed</span></span><br><span class="line">	PXOR	X0, X8</span><br><span class="line">	PXOR	X1, X9</span><br><span class="line">	PXOR	X2, X10</span><br><span class="line">	PXOR	X3, X11</span><br><span class="line">	PXOR	X4, X12</span><br><span class="line">	PXOR	X5, X13</span><br><span class="line">	PXOR	X6, X14</span><br><span class="line">	PXOR	X7, X15</span><br><span class="line"></span><br><span class="line">	<span class="comment">// scramble 3 times</span></span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line"></span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line"></span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line"></span><br><span class="line">	<span class="comment">// combine results</span></span><br><span class="line">	PXOR	X12, X8</span><br><span class="line">	PXOR	X13, X9</span><br><span class="line">	PXOR	X14, X10</span><br><span class="line">	PXOR	X15, X11</span><br><span class="line">	PXOR	X10, X8</span><br><span class="line">	PXOR	X11, X9</span><br><span class="line">	PXOR	X9, X8</span><br><span class="line">	MOVQ	X8, (DX)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">aes129plus:</span><br><span class="line">	<span class="comment">// make 7 more starting seeds</span></span><br><span class="line">	MOVO	X1, X2</span><br><span class="line">	MOVO	X1, X3</span><br><span class="line">	MOVO	X1, X4</span><br><span class="line">	MOVO	X1, X5</span><br><span class="line">	MOVO	X1, X6</span><br><span class="line">	MOVO	X1, X7</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">16</span>(SB), X1</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">32</span>(SB), X2</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">48</span>(SB), X3</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">64</span>(SB), X4</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">80</span>(SB), X5</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">96</span>(SB), X6</span><br><span class="line">	PXOR	runtime·aeskeysched+<span class="number">112</span>(SB), X7</span><br><span class="line">	AESENC	X1, X1</span><br><span class="line">	AESENC	X2, X2</span><br><span class="line">	AESENC	X3, X3</span><br><span class="line">	AESENC	X4, X4</span><br><span class="line">	AESENC	X5, X5</span><br><span class="line">	AESENC	X6, X6</span><br><span class="line">	AESENC	X7, X7</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// start with last (possibly overlapping) block</span></span><br><span class="line">	MOVOU	<span class="number">-128</span>(AX)(CX*<span class="number">1</span>), X8</span><br><span class="line">	MOVOU	<span class="number">-112</span>(AX)(CX*<span class="number">1</span>), X9</span><br><span class="line">	MOVOU	<span class="number">-96</span>(AX)(CX*<span class="number">1</span>), X10</span><br><span class="line">	MOVOU	<span class="number">-80</span>(AX)(CX*<span class="number">1</span>), X11</span><br><span class="line">	MOVOU	<span class="number">-64</span>(AX)(CX*<span class="number">1</span>), X12</span><br><span class="line">	MOVOU	<span class="number">-48</span>(AX)(CX*<span class="number">1</span>), X13</span><br><span class="line">	MOVOU	<span class="number">-32</span>(AX)(CX*<span class="number">1</span>), X14</span><br><span class="line">	MOVOU	<span class="number">-16</span>(AX)(CX*<span class="number">1</span>), X15</span><br><span class="line"></span><br><span class="line">	<span class="comment">// xor in seed</span></span><br><span class="line">	PXOR	X0, X8</span><br><span class="line">	PXOR	X1, X9</span><br><span class="line">	PXOR	X2, X10</span><br><span class="line">	PXOR	X3, X11</span><br><span class="line">	PXOR	X4, X12</span><br><span class="line">	PXOR	X5, X13</span><br><span class="line">	PXOR	X6, X14</span><br><span class="line">	PXOR	X7, X15</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// compute number of remaining 128-byte blocks</span></span><br><span class="line">	DECQ	CX</span><br><span class="line">	SHRQ	$<span class="number">7</span>, CX</span><br><span class="line">	</span><br><span class="line">aesloop:</span><br><span class="line">	<span class="comment">// scramble state</span></span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line"></span><br><span class="line">	<span class="comment">// scramble state, xor in a block</span></span><br><span class="line">	MOVOU	(AX), X0</span><br><span class="line">	MOVOU	<span class="number">16</span>(AX), X1</span><br><span class="line">	MOVOU	<span class="number">32</span>(AX), X2</span><br><span class="line">	MOVOU	<span class="number">48</span>(AX), X3</span><br><span class="line">	AESENC	X0, X8</span><br><span class="line">	AESENC	X1, X9</span><br><span class="line">	AESENC	X2, X10</span><br><span class="line">	AESENC	X3, X11</span><br><span class="line">	MOVOU	<span class="number">64</span>(AX), X4</span><br><span class="line">	MOVOU	<span class="number">80</span>(AX), X5</span><br><span class="line">	MOVOU	<span class="number">96</span>(AX), X6</span><br><span class="line">	MOVOU	<span class="number">112</span>(AX), X7</span><br><span class="line">	AESENC	X4, X12</span><br><span class="line">	AESENC	X5, X13</span><br><span class="line">	AESENC	X6, X14</span><br><span class="line">	AESENC	X7, X15</span><br><span class="line"></span><br><span class="line">	ADDQ	$<span class="number">128</span>, AX</span><br><span class="line">	DECQ	CX</span><br><span class="line">	JNE	aesloop</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3 more scrambles to finish</span></span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line">	AESENC	X8, X8</span><br><span class="line">	AESENC	X9, X9</span><br><span class="line">	AESENC	X10, X10</span><br><span class="line">	AESENC	X11, X11</span><br><span class="line">	AESENC	X12, X12</span><br><span class="line">	AESENC	X13, X13</span><br><span class="line">	AESENC	X14, X14</span><br><span class="line">	AESENC	X15, X15</span><br><span class="line"></span><br><span class="line">	PXOR	X12, X8</span><br><span class="line">	PXOR	X13, X9</span><br><span class="line">	PXOR	X14, X10</span><br><span class="line">	PXOR	X15, X11</span><br><span class="line">	PXOR	X10, X8</span><br><span class="line">	PXOR	X11, X9</span><br><span class="line">	PXOR	X9, X8</span><br><span class="line">	MOVQ	X8, (DX)</span><br><span class="line">	RET</span><br><span class="line">	</span><br><span class="line">TEXT runtime·aeshash32(SB),NOSPLIT,$<span class="number">0</span><span class="number">-24</span></span><br><span class="line">	MOVQ	p+<span class="number">0</span>(FP), AX	<span class="comment">// ptr to data</span></span><br><span class="line">	MOVQ	h+<span class="number">8</span>(FP), X0	<span class="comment">// seed</span></span><br><span class="line">	PINSRD	$<span class="number">2</span>, (AX), X0	<span class="comment">// data</span></span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">0</span>(SB), X0</span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">16</span>(SB), X0</span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">32</span>(SB), X0</span><br><span class="line">	MOVQ	X0, ret+<span class="number">16</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">TEXT runtime·aeshash64(SB),NOSPLIT,$<span class="number">0</span><span class="number">-24</span></span><br><span class="line">	MOVQ	p+<span class="number">0</span>(FP), AX	<span class="comment">// ptr to data</span></span><br><span class="line">	MOVQ	h+<span class="number">8</span>(FP), X0	<span class="comment">// seed</span></span><br><span class="line">	PINSRQ	$<span class="number">1</span>, (AX), X0	<span class="comment">// data</span></span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">0</span>(SB), X0</span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">16</span>(SB), X0</span><br><span class="line">	AESENC	runtime·aeskeysched+<span class="number">32</span>(SB), X0</span><br><span class="line">	MOVQ	X0, ret+<span class="number">16</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// simple mask to get rid of data in the high part of the register.</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x00</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x08</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x10</span>(SB)/<span class="number">8</span>, $<span class="number">0x00000000000000ff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x18</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x20</span>(SB)/<span class="number">8</span>, $<span class="number">0x000000000000ffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x28</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x30</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000ffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x38</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x40</span>(SB)/<span class="number">8</span>, $<span class="number">0x00000000ffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x48</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x50</span>(SB)/<span class="number">8</span>, $<span class="number">0x000000ffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x58</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x60</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000ffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x68</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x70</span>(SB)/<span class="number">8</span>, $<span class="number">0x00ffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x78</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x80</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x88</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x90</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0x98</span>(SB)/<span class="number">8</span>, $<span class="number">0x00000000000000ff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xa0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xa8</span>(SB)/<span class="number">8</span>, $<span class="number">0x000000000000ffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xb0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xb8</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000ffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xc0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xc8</span>(SB)/<span class="number">8</span>, $<span class="number">0x00000000ffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xd0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xd8</span>(SB)/<span class="number">8</span>, $<span class="number">0x000000ffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xe0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xe8</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000ffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xf0</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA masks&lt;&gt;+<span class="number">0xf8</span>(SB)/<span class="number">8</span>, $<span class="number">0x00ffffffffffffff</span></span><br><span class="line">GLOBL masks&lt;&gt;(SB),RODATA,$<span class="number">256</span></span><br><span class="line"></span><br><span class="line">TEXT ·checkASM(SB),NOSPLIT,$<span class="number">0</span><span class="number">-1</span></span><br><span class="line">	<span class="comment">// check that masks&lt;&gt;(SB) and shifts&lt;&gt;(SB) are aligned to 16-byte</span></span><br><span class="line">	MOVQ	$masks&lt;&gt;(SB), AX</span><br><span class="line">	MOVQ	$shifts&lt;&gt;(SB), BX</span><br><span class="line">	ORQ	BX, AX</span><br><span class="line">	TESTQ	$<span class="number">15</span>, AX</span><br><span class="line">	SETEQ	ret+<span class="number">0</span>(FP)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// these are arguments to pshufb. They move data down from</span></span><br><span class="line"><span class="comment">// the high bytes of the register to the low bytes of the register.</span></span><br><span class="line"><span class="comment">// index is how many bytes to move.</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x00</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x08</span>(SB)/<span class="number">8</span>, $<span class="number">0x0000000000000000</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x10</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffff0f</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x18</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x20</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffff0f0e</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x28</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x30</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffff0f0e0d</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x38</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x40</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffff0f0e0d0c</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x48</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x50</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffff0f0e0d0c0b</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x58</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x60</span>(SB)/<span class="number">8</span>, $<span class="number">0xffff0f0e0d0c0b0a</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x68</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x70</span>(SB)/<span class="number">8</span>, $<span class="number">0xff0f0e0d0c0b0a09</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x78</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x80</span>(SB)/<span class="number">8</span>, $<span class="number">0x0f0e0d0c0b0a0908</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x88</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffffff</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x90</span>(SB)/<span class="number">8</span>, $<span class="number">0x0e0d0c0b0a090807</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0x98</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffffff0f</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xa0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0d0c0b0a09080706</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xa8</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffffff0f0e</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xb0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0c0b0a0908070605</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xb8</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffffff0f0e0d</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xc0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0b0a090807060504</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xc8</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffffff0f0e0d0c</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xd0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0a09080706050403</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xd8</span>(SB)/<span class="number">8</span>, $<span class="number">0xffffff0f0e0d0c0b</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xe0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0908070605040302</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xe8</span>(SB)/<span class="number">8</span>, $<span class="number">0xffff0f0e0d0c0b0a</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xf0</span>(SB)/<span class="number">8</span>, $<span class="number">0x0807060504030201</span></span><br><span class="line">DATA shifts&lt;&gt;+<span class="number">0xf8</span>(SB)/<span class="number">8</span>, $<span class="number">0xff0f0e0d0c0b0a09</span></span><br><span class="line">GLOBL shifts&lt;&gt;(SB),RODATA,$<span class="number">256</span></span><br><span class="line"></span><br><span class="line">TEXT runtime·return0(SB), NOSPLIT, $<span class="number">0</span></span><br><span class="line">	MOVL	$<span class="number">0</span>, AX</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Called from cgo wrappers, this function returns g-&gt;m-&gt;curg.stack.hi.</span></span><br><span class="line"><span class="comment">// Must obey the gcc calling convention.</span></span><br><span class="line">TEXT _cgo_topofstack(SB),NOSPLIT,$<span class="number">0</span></span><br><span class="line">	get_tls(CX)</span><br><span class="line">	MOVQ	g(CX), AX</span><br><span class="line">	MOVQ	g_m(AX), AX</span><br><span class="line">	MOVQ	m_curg(AX), AX</span><br><span class="line">	MOVQ	(g_stack+stack_hi)(AX), AX</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// The top-most function running on a goroutine</span></span><br><span class="line"><span class="comment">// returns to goexit+PCQuantum.</span></span><br><span class="line">TEXT runtime·goexit(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	BYTE	$<span class="number">0x90</span>	<span class="comment">// NOP</span></span><br><span class="line">	CALL	runtime·goexit1(SB)	<span class="comment">// does not return</span></span><br><span class="line">	<span class="comment">// traceback from goexit1 must hit code range of goexit</span></span><br><span class="line">	BYTE	$<span class="number">0x90</span>	<span class="comment">// NOP</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This is called from .init_array and follows the platform, not Go, ABI.</span></span><br><span class="line">TEXT runtime·addmoduledata(SB),NOSPLIT,$<span class="number">0</span><span class="number">-0</span></span><br><span class="line">	PUSHQ	R15 <span class="comment">// The access to global variables below implicitly uses R15, which is callee-save</span></span><br><span class="line">	MOVQ	runtime·lastmoduledatap(SB), AX</span><br><span class="line">	MOVQ	DI, moduledata_next(AX)</span><br><span class="line">	MOVQ	DI, runtime·lastmoduledatap(SB)</span><br><span class="line">	POPQ	R15</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line"><span class="comment">// gcWriteBarrier performs a heap pointer write and informs the GC.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// gcWriteBarrier does NOT follow the Go ABI. It takes two arguments:</span></span><br><span class="line"><span class="comment">// - DI is the destination of the write</span></span><br><span class="line"><span class="comment">// - AX is the value being written at DI</span></span><br><span class="line"><span class="comment">// It clobbers FLAGS. It does not clobber any general-purpose registers,</span></span><br><span class="line"><span class="comment">// but may clobber others (e.g., SSE registers).</span></span><br><span class="line">TEXT runtime·gcWriteBarrier(SB),NOSPLIT,$<span class="number">120</span></span><br><span class="line">	<span class="comment">// Save the registers clobbered by the fast path. This is slightly</span></span><br><span class="line">	<span class="comment">// faster than having the caller spill these.</span></span><br><span class="line">	MOVQ	R14, <span class="number">104</span>(SP)</span><br><span class="line">	MOVQ	R13, <span class="number">112</span>(SP)</span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> Consider passing g.m.p in as an argument so they can be shared</span></span><br><span class="line">	<span class="comment">// across a sequence of write barriers.</span></span><br><span class="line">	get_tls(R13)</span><br><span class="line">	MOVQ	g(R13), R13</span><br><span class="line">	MOVQ	g_m(R13), R13</span><br><span class="line">	MOVQ	m_p(R13), R13</span><br><span class="line">	MOVQ	(p_wbBuf+wbBuf_next)(R13), R14</span><br><span class="line">	<span class="comment">// Increment wbBuf.next position.</span></span><br><span class="line">	LEAQ	<span class="number">16</span>(R14), R14</span><br><span class="line">	MOVQ	R14, (p_wbBuf+wbBuf_next)(R13)</span><br><span class="line">	CMPQ	R14, (p_wbBuf+wbBuf_end)(R13)</span><br><span class="line">	<span class="comment">// Record the write.</span></span><br><span class="line">	MOVQ	AX, <span class="number">-16</span>(R14)	<span class="comment">// Record value</span></span><br><span class="line">	<span class="comment">// Note: This turns bad pointer writes into bad</span></span><br><span class="line">	<span class="comment">// pointer reads, which could be confusing. We could avoid</span></span><br><span class="line">	<span class="comment">// reading from obviously bad pointers, which would</span></span><br><span class="line">	<span class="comment">// take care of the vast majority of these. We could</span></span><br><span class="line">	<span class="comment">// patch this up in the signal handler, or use XCHG to</span></span><br><span class="line">	<span class="comment">// combine the read and the write.</span></span><br><span class="line">	MOVQ	(DI), R13</span><br><span class="line">	MOVQ	R13, <span class="number">-8</span>(R14)	<span class="comment">// Record *slot</span></span><br><span class="line">	<span class="comment">// Is the buffer full? (flags set in CMPQ above)</span></span><br><span class="line">	JEQ	flush</span><br><span class="line">ret:</span><br><span class="line">	MOVQ	<span class="number">104</span>(SP), R14</span><br><span class="line">	MOVQ	<span class="number">112</span>(SP), R13</span><br><span class="line">	<span class="comment">// Do the write.</span></span><br><span class="line">	MOVQ	AX, (DI)</span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">flush:</span><br><span class="line">	<span class="comment">// Save all general purpose registers since these could be</span></span><br><span class="line">	<span class="comment">// clobbered by wbBufFlush and were not saved by the caller.</span></span><br><span class="line">	<span class="comment">// It is possible for wbBufFlush to clobber other registers</span></span><br><span class="line">	<span class="comment">// (e.g., SSE registers), but the compiler takes care of saving</span></span><br><span class="line">	<span class="comment">// those in the caller if necessary. This strikes a balance</span></span><br><span class="line">	<span class="comment">// with registers that are likely to be used.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// We don't have type information for these, but all code under</span></span><br><span class="line">	<span class="comment">// here is NOSPLIT, so nothing will observe these.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> We could strike a different balance; e.g., saving X0</span></span><br><span class="line">	<span class="comment">// and not saving GP registers that are less likely to be used.</span></span><br><span class="line">	MOVQ	DI, <span class="number">0</span>(SP)	<span class="comment">// Also first argument to wbBufFlush</span></span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)	<span class="comment">// Also second argument to wbBufFlush</span></span><br><span class="line">	MOVQ	BX, <span class="number">16</span>(SP)</span><br><span class="line">	MOVQ	CX, <span class="number">24</span>(SP)</span><br><span class="line">	MOVQ	DX, <span class="number">32</span>(SP)</span><br><span class="line">	<span class="comment">// DI already saved</span></span><br><span class="line">	MOVQ	SI, <span class="number">40</span>(SP)</span><br><span class="line">	MOVQ	BP, <span class="number">48</span>(SP)</span><br><span class="line">	MOVQ	R8, <span class="number">56</span>(SP)</span><br><span class="line">	MOVQ	R9, <span class="number">64</span>(SP)</span><br><span class="line">	MOVQ	R10, <span class="number">72</span>(SP)</span><br><span class="line">	MOVQ	R11, <span class="number">80</span>(SP)</span><br><span class="line">	MOVQ	R12, <span class="number">88</span>(SP)</span><br><span class="line">	<span class="comment">// R13 already saved</span></span><br><span class="line">	<span class="comment">// R14 already saved</span></span><br><span class="line">	MOVQ	R15, <span class="number">96</span>(SP)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// This takes arguments DI and AX</span></span><br><span class="line">	CALL	runtime·wbBufFlush(SB)</span><br><span class="line"></span><br><span class="line">	MOVQ	<span class="number">0</span>(SP), DI</span><br><span class="line">	MOVQ	<span class="number">8</span>(SP), AX</span><br><span class="line">	MOVQ	<span class="number">16</span>(SP), BX</span><br><span class="line">	MOVQ	<span class="number">24</span>(SP), CX</span><br><span class="line">	MOVQ	<span class="number">32</span>(SP), DX</span><br><span class="line">	MOVQ	<span class="number">40</span>(SP), SI</span><br><span class="line">	MOVQ	<span class="number">48</span>(SP), BP</span><br><span class="line">	MOVQ	<span class="number">56</span>(SP), R8</span><br><span class="line">	MOVQ	<span class="number">64</span>(SP), R9</span><br><span class="line">	MOVQ	<span class="number">72</span>(SP), R10</span><br><span class="line">	MOVQ	<span class="number">80</span>(SP), R11</span><br><span class="line">	MOVQ	<span class="number">88</span>(SP), R12</span><br><span class="line">	MOVQ	<span class="number">96</span>(SP), R15</span><br><span class="line">	JMP	ret</span><br><span class="line"></span><br><span class="line">DATA	debugCallFrameTooLarge&lt;&gt;+<span class="number">0x00</span>(SB)/<span class="number">8</span>, $<span class="string">"call fra"</span></span><br><span class="line">DATA	debugCallFrameTooLarge&lt;&gt;+<span class="number">0x08</span>(SB)/<span class="number">8</span>, $<span class="string">"me too l"</span></span><br><span class="line">DATA	debugCallFrameTooLarge&lt;&gt;+<span class="number">0x10</span>(SB)/<span class="number">4</span>, $<span class="string">"arge"</span></span><br><span class="line">GLOBL	debugCallFrameTooLarge&lt;&gt;(SB), RODATA, $<span class="number">0x14</span>	<span class="comment">// Size duplicated below</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// debugCallV1 is the entry point for debugger-injected function</span></span><br><span class="line"><span class="comment">// calls on running goroutines. It informs the runtime that a</span></span><br><span class="line"><span class="comment">// debug call has been injected and creates a call frame for the</span></span><br><span class="line"><span class="comment">// debugger to fill in.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// To inject a function call, a debugger should:</span></span><br><span class="line"><span class="comment">// 1. Check that the goroutine is in state _Grunning and that</span></span><br><span class="line"><span class="comment">//    there are at least 256 bytes free on the stack.</span></span><br><span class="line"><span class="comment">// 2. Push the current PC on the stack (updating SP).</span></span><br><span class="line"><span class="comment">// 3. Write the desired argument frame size at SP-16 (using the SP</span></span><br><span class="line"><span class="comment">//    after step 2).</span></span><br><span class="line"><span class="comment">// 4. Save all machine registers (including flags and XMM reigsters)</span></span><br><span class="line"><span class="comment">//    so they can be restored later by the debugger.</span></span><br><span class="line"><span class="comment">// 5. Set the PC to debugCallV1 and resume execution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// If the goroutine is in state _Grunnable, then it's not generally</span></span><br><span class="line"><span class="comment">// safe to inject a call because it may return out via other runtime</span></span><br><span class="line"><span class="comment">// operations. Instead, the debugger should unwind the stack to find</span></span><br><span class="line"><span class="comment">// the return to non-runtime code, add a temporary breakpoint there,</span></span><br><span class="line"><span class="comment">// and inject the call once that breakpoint is hit.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// If the goroutine is in any other state, it's not safe to inject a call.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This function communicates back to the debugger by setting RAX and</span></span><br><span class="line"><span class="comment">// invoking INT3 to raise a breakpoint signal. See the comments in the</span></span><br><span class="line"><span class="comment">// implementation for the protocol the debugger is expected to</span></span><br><span class="line"><span class="comment">// follow. InjectDebugCall in the runtime tests demonstates this protocol.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// The debugger must ensure that any pointers passed to the function</span></span><br><span class="line"><span class="comment">// obey escape analysis requirements. Specifically, it must not pass</span></span><br><span class="line"><span class="comment">// a stack pointer to an escaping argument. debugCallV1 cannot check</span></span><br><span class="line"><span class="comment">// this invariant.</span></span><br><span class="line">TEXT runtime·debugCallV1(SB),NOSPLIT,$<span class="number">152</span><span class="number">-0</span></span><br><span class="line">	<span class="comment">// Save all registers that may contain pointers in GC register</span></span><br><span class="line">	<span class="comment">// map order (see ssa.registersAMD64). This makes it possible</span></span><br><span class="line">	<span class="comment">// to copy the stack while updating pointers currently held in</span></span><br><span class="line">	<span class="comment">// registers, and for the GC to find roots in registers.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// We can't do anything that might clobber any of these</span></span><br><span class="line">	<span class="comment">// registers before this.</span></span><br><span class="line">	MOVQ	R15, r15-(<span class="number">14</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R14, r14-(<span class="number">13</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R13, r13-(<span class="number">12</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R12, r12-(<span class="number">11</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R11, r11-(<span class="number">10</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R10, r10-(<span class="number">9</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R9, r9-(<span class="number">8</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	R8, r8-(<span class="number">7</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	DI, di-(<span class="number">6</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	SI, si-(<span class="number">5</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	BP, bp-(<span class="number">4</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	BX, bx-(<span class="number">3</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	DX, dx-(<span class="number">2</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	<span class="comment">// Save the frame size before we clobber it. Either of the last</span></span><br><span class="line">	<span class="comment">// saves could clobber this depending on whether there's a saved BP.</span></span><br><span class="line">	MOVQ	frameSize<span class="number">-24</span>(FP), DX	<span class="comment">// aka -16(RSP) before prologue</span></span><br><span class="line">	MOVQ	CX, cx-(<span class="number">1</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line">	MOVQ	AX, ax-(<span class="number">0</span>*<span class="number">8</span>+<span class="number">8</span>)(SP)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Save the argument frame size.</span></span><br><span class="line">	MOVQ	DX, frameSize<span class="number">-128</span>(SP)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Perform a safe-point check.</span></span><br><span class="line">	MOVQ	retpc<span class="number">-8</span>(FP), AX	<span class="comment">// Caller's PC</span></span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	CALL	runtime·debugCallCheck(SB)</span><br><span class="line">	MOVQ	<span class="number">8</span>(SP), AX</span><br><span class="line">	TESTQ	AX, AX</span><br><span class="line">	JZ	good</span><br><span class="line">	<span class="comment">// The safety check failed. Put the reason string at the top</span></span><br><span class="line">	<span class="comment">// of the stack.</span></span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	<span class="number">16</span>(SP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)</span><br><span class="line">	<span class="comment">// Set AX to 8 and invoke INT3. The debugger should get the</span></span><br><span class="line">	<span class="comment">// reason a call can't be injected from the top of the stack</span></span><br><span class="line">	<span class="comment">// and resume execution.</span></span><br><span class="line">	MOVQ	$<span class="number">8</span>, AX</span><br><span class="line">	BYTE	$<span class="number">0xcc</span></span><br><span class="line">	JMP	restore</span><br><span class="line"></span><br><span class="line">good:</span><br><span class="line">	<span class="comment">// Registers are saved and it's safe to make a call.</span></span><br><span class="line">	<span class="comment">// Open up a call frame, moving the stack if necessary.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Once the frame is allocated, this will set AX to 0 and</span></span><br><span class="line">	<span class="comment">// invoke INT3. The debugger should write the argument</span></span><br><span class="line">	<span class="comment">// frame for the call at SP, push the trapping PC on the</span></span><br><span class="line">	<span class="comment">// stack, set the PC to the function to call, set RCX to point</span></span><br><span class="line">	<span class="comment">// to the closure (if a closure call), and resume execution.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// If the function returns, this will set AX to 1 and invoke</span></span><br><span class="line">	<span class="comment">// INT3. The debugger can then inspect any return value saved</span></span><br><span class="line">	<span class="comment">// on the stack at SP and resume execution again.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// If the function panics, this will set AX to 2 and invoke INT3.</span></span><br><span class="line">	<span class="comment">// The interface&#123;&#125; value of the panic will be at SP. The debugger</span></span><br><span class="line">	<span class="comment">// can inspect the panic value and resume execution again.</span></span><br><span class="line">#define DEBUG_CALL_DISPATCH(NAME,MAXSIZE)	\</span><br><span class="line">	CMPQ	AX, $MAXSIZE;			\</span><br><span class="line">	JA	<span class="number">5</span>(PC);				\</span><br><span class="line">	MOVQ	$NAME(SB), AX;			\</span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP);			\</span><br><span class="line">	CALL	runtime·debugCallWrap(SB);	\</span><br><span class="line">	JMP	restore</span><br><span class="line"></span><br><span class="line">	MOVQ	frameSize<span class="number">-128</span>(SP), AX</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall32&lt;&gt;, <span class="number">32</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall64&lt;&gt;, <span class="number">64</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall128&lt;&gt;, <span class="number">128</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall256&lt;&gt;, <span class="number">256</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall512&lt;&gt;, <span class="number">512</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall1024&lt;&gt;, <span class="number">1024</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall2048&lt;&gt;, <span class="number">2048</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall4096&lt;&gt;, <span class="number">4096</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall8192&lt;&gt;, <span class="number">8192</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall16384&lt;&gt;, <span class="number">16384</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall32768&lt;&gt;, <span class="number">32768</span>)</span><br><span class="line">	DEBUG_CALL_DISPATCH(debugCall65536&lt;&gt;, <span class="number">65536</span>)</span><br><span class="line">	<span class="comment">// The frame size is too large. Report the error.</span></span><br><span class="line">	MOVQ	$debugCallFrameTooLarge&lt;&gt;(SB), AX</span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	$<span class="number">0x14</span>, <span class="number">8</span>(SP)</span><br><span class="line">	MOVQ	$<span class="number">8</span>, AX</span><br><span class="line">	BYTE	$<span class="number">0xcc</span></span><br><span class="line">	JMP	restore</span><br><span class="line"></span><br><span class="line">restore:</span><br><span class="line">	<span class="comment">// Calls and failures resume here.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// Set AX to 16 and invoke INT3. The debugger should restore</span></span><br><span class="line">	<span class="comment">// all registers except RIP and RSP and resume execution.</span></span><br><span class="line">	MOVQ	$<span class="number">16</span>, AX</span><br><span class="line">	BYTE	$<span class="number">0xcc</span></span><br><span class="line">	<span class="comment">// We must not modify flags after this point.</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Restore pointer-containing registers, which may have been</span></span><br><span class="line">	<span class="comment">// modified from the debugger's copy by stack copying.</span></span><br><span class="line">	MOVQ	ax-(<span class="number">0</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), AX</span><br><span class="line">	MOVQ	cx-(<span class="number">1</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), CX</span><br><span class="line">	MOVQ	dx-(<span class="number">2</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), DX</span><br><span class="line">	MOVQ	bx-(<span class="number">3</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), BX</span><br><span class="line">	MOVQ	bp-(<span class="number">4</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), BP</span><br><span class="line">	MOVQ	si-(<span class="number">5</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), SI</span><br><span class="line">	MOVQ	di-(<span class="number">6</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), DI</span><br><span class="line">	MOVQ	r8-(<span class="number">7</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R8</span><br><span class="line">	MOVQ	r9-(<span class="number">8</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R9</span><br><span class="line">	MOVQ	r10-(<span class="number">9</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R10</span><br><span class="line">	MOVQ	r11-(<span class="number">10</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R11</span><br><span class="line">	MOVQ	r12-(<span class="number">11</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R12</span><br><span class="line">	MOVQ	r13-(<span class="number">12</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R13</span><br><span class="line">	MOVQ	r14-(<span class="number">13</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R14</span><br><span class="line">	MOVQ	r15-(<span class="number">14</span>*<span class="number">8</span>+<span class="number">8</span>)(SP), R15</span><br><span class="line"></span><br><span class="line">	RET</span><br><span class="line"></span><br><span class="line">#define DEBUG_CALL_FN(NAME,MAXSIZE)		\</span><br><span class="line">TEXT NAME(SB),WRAPPER,$MAXSIZE<span class="number">-0</span>;		\</span><br><span class="line">	NO_LOCAL_POINTERS;			\</span><br><span class="line">	MOVQ	$<span class="number">0</span>, AX;				\</span><br><span class="line">	BYTE	$<span class="number">0xcc</span>;				\</span><br><span class="line">	MOVQ	$<span class="number">1</span>, AX;				\</span><br><span class="line">	BYTE	$<span class="number">0xcc</span>;				\</span><br><span class="line">	RET</span><br><span class="line">DEBUG_CALL_FN(debugCall32&lt;&gt;, <span class="number">32</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall64&lt;&gt;, <span class="number">64</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall128&lt;&gt;, <span class="number">128</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall256&lt;&gt;, <span class="number">256</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall512&lt;&gt;, <span class="number">512</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall1024&lt;&gt;, <span class="number">1024</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall2048&lt;&gt;, <span class="number">2048</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall4096&lt;&gt;, <span class="number">4096</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall8192&lt;&gt;, <span class="number">8192</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall16384&lt;&gt;, <span class="number">16384</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall32768&lt;&gt;, <span class="number">32768</span>)</span><br><span class="line">DEBUG_CALL_FN(debugCall65536&lt;&gt;, <span class="number">65536</span>)</span><br><span class="line"></span><br><span class="line">TEXT runtime·debugCallPanicked(SB),NOSPLIT,$<span class="number">16</span><span class="number">-16</span></span><br><span class="line">	<span class="comment">// Copy the panic value to the top of stack.</span></span><br><span class="line">	MOVQ	val_type+<span class="number">0</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">0</span>(SP)</span><br><span class="line">	MOVQ	val_data+<span class="number">8</span>(FP), AX</span><br><span class="line">	MOVQ	AX, <span class="number">8</span>(SP)</span><br><span class="line">	MOVQ	$<span class="number">2</span>, AX</span><br><span class="line">	BYTE	$<span class="number">0xcc</span></span><br><span class="line">	RET</span><br></pre></td></tr></table></figure>
</details>
<br>
<p>Go程序启动过程:</p>
<ol>
<li>检查运行平台的CPU，设置好程序运行需要相关标志。</li>
<li>TLS的初始化。</li>
<li>runtime.args、runtime.osinit、runtime.schedinit 三个方法做好程序运行需要的各种变量与调度器。</li>
<li>runtime.newproc创建新的goroutine用于绑定用户写的main方法。</li>
<li>runtime.mstart开始goroutine的调度。</li>
</ol>
<br>
<img src="/2019/10/30/神器gdb/5.png" width="100%" height="50%">
<br>
<p>main 函数里执行的一些重要的操作包括：</p>
<ul>
<li>新建一个线程执行 sysmon 函数，定期垃圾回收和调度抢占；</li>
<li>启动 gc；</li>
<li>执行所有的 init 函数等等</li>
</ul>
<br>
<p>更多：</p>
<p><a href="https://mp.weixin.qq.com/s/W9D4Sl-6jYfcpczzdPfByQ" target="_blank" rel="noopener">Go语言goroutine调度器初始化</a></p>
<!--爽哥为赞赏功能新加--></div><!--script(type='text/javascript', src=url_for(theme.js) + '/jquery.js' + '?v=' + theme.version, async)--><script type="text/javascript" src="https://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script><div class="post-donate"><div id="donate_board" class="donate_bar center"><a id="btn_donate" href="javascript:;" title="打赏" class="btn_donate"></a><div class="donate_txt"> &uarr;<br>BTC Address:3NNxkM6ez7szsUAgTnK2VaF949LoGmXuBs<br></div></div><div id="donate_guide" class="donate_bar center hidden pay"><img src="http://cuishuang.gitee.io/img/weChatMoney.png" title="微信打赏" alt="微信打赏"><img src="http://cuishuang.gitee.io/img/alipayMoney.png" title="支付宝打赏" alt="支付宝打赏"><img src="http://cuishuang.gitee.io/img/btc.png" title="比特币打赏" alt="比特币打赏"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><!-- google adsense--><!--if theme.show_ad_post == true--><!--    script(async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")--><!--    ins.adsbygoogle(style="display:block" data-ad-client="ca-pub-1181798273731653" data-ad-format="auto")--><!--    script (adsbygoogle = window.adsbygoogle || []).push({});-->
<div class="post-copyright"><blockquote><p>原文作者: fliter</p><p>原文链接: </p><a href="http://www.dashen.tech/2019/10/30/神器gdb/">http://www.dashen.tech/2019/10/30/神器gdb/</a><p>版权声明: 转载请注明出处</p></blockquote></div><div class="tags"><a href="/tags/Tools/">Tools</a><a href="/tags/Go/">Go</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/10/30/Makefile书写小结/" class="pre">Makefile书写小结</a><a href="/2019/10/29/两个生僻小命令-go-mod-why和go-mod-graph/" class="next">两个生僻小命令---go mod why和go mod graph</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-GDB"><span class="toc-text">¶What is GDB?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#入门指南"><span class="toc-text">¶入门指南</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用案例"><span class="toc-text">¶使用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#验证InnoDB自增row-id的上限"><span class="toc-text">¶验证InnoDB自增row_id的上限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#探究Go程序启动过程-即确定真正的入口函数"><span class="toc-text">¶探究Go程序启动过程(即确定真正的入口函数)</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/12/14/OBS推流/">OBS推流</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/14/二进制分析工具/">二进制分析工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/12/协程调度顺序/">协程调度顺序</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/11/24/Go内存管理之内存分配/">Go内存管理之内存分配</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/11/17/Go内存优化/">Go内存优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/11/09/关于零号协程/">关于零号协程</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/10/11/统计某月有几篇博文/">统计某月有几篇博文</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/10/11/调试Go源代码/">调试Go源代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/10/08/代码搜索技巧/">代码搜索技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/25/SubQuery入门指南II/">SubQuery入门指南II</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-weixin"> 扫码关注-旅途散记</i></div><img width="100%" height="233" title="微信扫一扫" src="https://cuishuang.gitee.io/img/lvtusanji.jpg"></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tree/">Tree</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/runtime/">runtime</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/sync/">sync</a><span class="category-list-count">12</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/操作系统/" style="font-size: 15px;">操作系统</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Pearl/" style="font-size: 15px;">Pearl</a> <a href="/tags/Todo/" style="font-size: 15px;">Todo</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a> <a href="/tags/Compiler/" style="font-size: 15px;">Compiler</a> <a href="/tags/数据库/" style="font-size: 15px;">数据库</a> <a href="/tags/密码学/" style="font-size: 15px;">密码学</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/译海一粟/" style="font-size: 15px;">译海一粟</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/杂谈/" style="font-size: 15px;">杂谈</a> <a href="/tags/金庸/" style="font-size: 15px;">金庸</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/数学/" style="font-size: 15px;">数学</a> <a href="/tags/Rust/" style="font-size: 15px;">Rust</a> <a href="/tags/explore/" style="font-size: 15px;">explore</a> <a href="/tags/书摘-影评/" style="font-size: 15px;">书摘/影评</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/足球-体育/" style="font-size: 15px;">足球&体育</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/读城记/" style="font-size: 15px;">读城记</a> <a href="/tags/星陨/" style="font-size: 15px;">星陨</a> <a href="/tags/奇文共赏/" style="font-size: 15px;">奇文共赏</a> <a href="/tags/区域经济/" style="font-size: 15px;">区域经济</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">十二月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">四月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">十二月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">四月 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">三月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1093/02/">二月 1093</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://leetcode.com/" title="LeetCode" target="_blank">LeetCode</a><ul></ul><a href="https://golang.org/" title="Go官网" target="_blank">Go官网</a><ul></ul><a href="https://tonybai.com/" title="TonyBai" target="_blank">TonyBai</a><ul></ul><a href="http://lietoumai.com/" title="顾问麦的小站" target="_blank">顾问麦的小站</a><ul></ul><a href="https://www.coolshell.cn/" title="酷壳" target="_blank">酷壳</a><ul></ul><a href="https://notes.diguage.com/" title="瓜哥" target="_blank">瓜哥</a><ul></ul><a href="https://taoshu.in/" title="涛叔" target="_blank">涛叔</a><ul></ul><a href="https://colobu.com/" title="鸟窝" target="_blank">鸟窝</a><ul></ul><a href="http://xiaorui.cc/" title="峰云" target="_blank">峰云</a><ul></ul><a href="https://eddycjy.com/posts/" title="煎鱼" target="_blank">煎鱼</a><ul></ul><a href="https://hutusi.com/" title="胡涂说" target="_blank">胡涂说</a><ul></ul><a href="https://qcrao.com/" title="码农桃花源" target="_blank">码农桃花源</a><ul></ul><a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial" title="远方的笔记" target="_blank">远方的笔记</a><ul></ul><a href="https://xargin.com/" title="No Headback" target="_blank">No Headback</a><ul></ul><a href="http://thoslin.github.io/" title="Eat Pray Code" target="_blank">Eat Pray Code</a><ul></ul><a href="https://www.ashenone66.cn/" title="AshenOne's Blog" target="_blank">AshenOne's Blog</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> 备案号:<a href="http://www.beian.miit.gov.cn/"> 鲁ICP备18010105号</a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">fliter.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e10d6858b78ff3fc7853fc72e7240eab";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>