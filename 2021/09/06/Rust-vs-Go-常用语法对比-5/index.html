<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="崔某人的碎碎念,通才基础上的专才"><meta name="keywords" content="mysql,golang,算法"><title>Rust vs Go:常用语法对比(5) | 清澄秋爽</title><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.3"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.3"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Rust vs Go:常用语法对比(5)</h1><a id="logo" href="/.">清澄秋爽</a><p class="description">苹果树下的思索者 书写是对思维的缓存</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Rust vs Go:常用语法对比(5)</h1><div class="post-meta"><a href="/2021/09/06/Rust-vs-Go-常用语法对比-5/#comments" class="comment-count"></a><p><span class="date">Sep 06, 2021</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><br>
<h3 id="81-font-color-fb6107-Round-floating-point-number-to-integer-font"><a class="header-anchor" href="#81-font-color-fb6107-Round-floating-point-number-to-integer-font">¶</a>81. <font color="fb6107">Round floating point number to integer</font></h3>
<blockquote>
<p>Declare integer y and initialize it with the rounded value of floating point number x .<br>
Ties (when the fractional part of x is exactly .5) must be rounded up (to positive infinity).</p>
</blockquote>
<p><em>按规则取整</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">round</span><span class="params">(x <span class="keyword">float64</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	y := <span class="keyword">int</span>(math.Floor(x + <span class="number">0.5</span>))</span><br><span class="line">	<span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, x := <span class="keyword">range</span> []<span class="keyword">float64</span>&#123;<span class="number">-1.1</span>, <span class="number">-0.9</span>, <span class="number">-0.5</span>, <span class="number">-0.1</span>, <span class="number">0.</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">1.1</span>&#125; &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"%5.1f %5d\n"</span>, x, round(x))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1.1</span>    <span class="number">-1</span></span><br><span class="line"><span class="number">-0.9</span>    <span class="number">-1</span></span><br><span class="line"><span class="number">-0.5</span>     <span class="number">0</span></span><br><span class="line"><span class="number">-0.1</span>     <span class="number">0</span></span><br><span class="line"> <span class="number">0.0</span>     <span class="number">0</span></span><br><span class="line"> <span class="number">0.1</span>     <span class="number">0</span></span><br><span class="line"> <span class="number">0.5</span>     <span class="number">1</span></span><br><span class="line"> <span class="number">0.9</span>     <span class="number">1</span></span><br><span class="line"> <span class="number">1.1</span>     <span class="number">1</span></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x : <span class="built_in">f64</span> = <span class="number">2.71828</span>;</span><br><span class="line">    <span class="keyword">let</span> y = x.round() <span class="keyword">as</span> <span class="built_in">i64</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125; &#123;&#125;"</span>, x, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2.71828 3</code></p>
<br>
<h3 id="82-font-color-f3de2c-Count-substring-occurrences-font"><a class="header-anchor" href="#82-font-color-f3de2c-Count-substring-occurrences-font">¶</a>82. <font color="f3de2c">Count substring occurrences</font></h3>
<p><em>统计子字符串出现次数</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">"Romaromamam"</span></span><br><span class="line">	t := <span class="string">"mam"</span></span><br><span class="line"></span><br><span class="line">	x := strings.Count(s, t)</span><br><span class="line"></span><br><span class="line">	fmt.Println(x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>1</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="string">"lorem ipsum lorem ipsum lorem ipsum lorem ipsum"</span>;</span><br><span class="line">    <span class="keyword">let</span> t = <span class="string">"ipsum"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> c = s.matches(t).count();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125; occurrences"</span>, c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Disjoint matches: overlapping occurrences are not counted.</strong></p>
<p><code>4 occurrences</code></p>
<br>
<h3 id="83-font-color-7cb518-Regex-with-character-repetition-font"><a class="header-anchor" href="#83-font-color-7cb518-Regex-with-character-repetition-font">¶</a>83. <font color="7cb518">Regex with character repetition</font></h3>
<blockquote>
<p>Declare regular expression r matching strings “http”, “htttp”, “httttp”, etc.</p>
</blockquote>
<p><em>正则表达式匹配</em>重复字符</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"regexp"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := regexp.MustCompile(<span class="string">"htt+p"</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, s := <span class="keyword">range</span> []<span class="keyword">string</span>&#123;</span><br><span class="line">		<span class="string">"hp"</span>,</span><br><span class="line">		<span class="string">"htp"</span>,</span><br><span class="line">		<span class="string">"http"</span>,</span><br><span class="line">		<span class="string">"htttp"</span>,</span><br><span class="line">		<span class="string">"httttp"</span>,</span><br><span class="line">		<span class="string">"htttttp"</span>,</span><br><span class="line">		<span class="string">"htttttp"</span>,</span><br><span class="line">		<span class="string">"word htttp in a sentence"</span>,</span><br><span class="line">	&#125; &#123;</span><br><span class="line">		fmt.Println(s, <span class="string">"=&gt;"</span>, r.MatchString(s))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hp =&gt; <span class="literal">false</span></span><br><span class="line">htp =&gt; <span class="literal">false</span></span><br><span class="line">http =&gt; <span class="literal">true</span></span><br><span class="line">htttp =&gt; <span class="literal">true</span></span><br><span class="line">httttp =&gt; <span class="literal">true</span></span><br><span class="line">htttttp =&gt; <span class="literal">true</span></span><br><span class="line">htttttp =&gt; <span class="literal">true</span></span><br><span class="line">word htttp in a sentence =&gt; <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> regex;</span><br><span class="line"><span class="keyword">use</span> regex::Regex;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> r = Regex::new(<span class="string">r"htt+p"</span>).unwrap();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">assert!</span>(r.is_match(<span class="string">"http"</span>));</span><br><span class="line">    <span class="built_in">assert!</span>(r.is_match(<span class="string">"htttp"</span>));</span><br><span class="line">    <span class="built_in">assert!</span>(r.is_match(<span class="string">"httttp"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="84-font-color-5c8001-Count-bits-set-in-integer-binary-representation-font"><a class="header-anchor" href="#84-font-color-5c8001-Count-bits-set-in-integer-binary-representation-font">¶</a>84. <font color="5c8001">Count bits set in integer binary representation</font></h3>
<font size="1" color="orange">
Count number c of 1s in the integer i in base 2.
<p>E.g. i=6 → c=2</p>
</font>
<p><em>计算十进制整型的二进制表示中 1的个数</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PopCountUInt64</span><span class="params">(i <span class="keyword">uint64</span>)</span> <span class="params">(c <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// bit population count, see</span></span><br><span class="line">	<span class="comment">// http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel</span></span><br><span class="line">	i -= (i &gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x5555555555555555</span></span><br><span class="line">	i = (i&gt;&gt;<span class="number">2</span>)&amp;<span class="number">0x3333333333333333</span> + i&amp;<span class="number">0x3333333333333333</span></span><br><span class="line">	i += i &gt;&gt; <span class="number">4</span></span><br><span class="line">	i &amp;= <span class="number">0x0f0f0f0f0f0f0f0f</span></span><br><span class="line">	i *= <span class="number">0x0101010101010101</span></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">int</span>(i &gt;&gt; <span class="number">56</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PopCountUInt32</span><span class="params">(i <span class="keyword">uint32</span>)</span> <span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// bit population count, see</span></span><br><span class="line">	<span class="comment">// http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel</span></span><br><span class="line">	i -= (i &gt;&gt; <span class="number">1</span>) &amp; <span class="number">0x55555555</span></span><br><span class="line">	i = (i&gt;&gt;<span class="number">2</span>)&amp;<span class="number">0x33333333</span> + i&amp;<span class="number">0x33333333</span></span><br><span class="line">	i += i &gt;&gt; <span class="number">4</span></span><br><span class="line">	i &amp;= <span class="number">0x0f0f0f0f</span></span><br><span class="line">	i *= <span class="number">0x01010101</span></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">int</span>(i &gt;&gt; <span class="number">24</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">uint64</span>(<span class="number">0</span>); i &lt; <span class="number">16</span>; i++ &#123;</span><br><span class="line">		c := PopCountUInt64(i)</span><br><span class="line">		fmt.Printf(<span class="string">"%4d %04[1]b %d\n"</span>, i, c)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">uint32</span>(<span class="number">0</span>); i &lt; <span class="number">16</span>; i++ &#123;</span><br><span class="line">		c := PopCountUInt32(i)</span><br><span class="line">		fmt.Printf(<span class="string">"%4d %04[1]b %d\n"</span>, i, c)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">0</span> <span class="number">0000</span> <span class="number">0</span></span><br><span class="line"> <span class="number">1</span> <span class="number">0001</span> <span class="number">1</span></span><br><span class="line"> <span class="number">2</span> <span class="number">0010</span> <span class="number">1</span></span><br><span class="line"> <span class="number">3</span> <span class="number">0011</span> <span class="number">2</span></span><br><span class="line"> <span class="number">4</span> <span class="number">0100</span> <span class="number">1</span></span><br><span class="line"> <span class="number">5</span> <span class="number">0101</span> <span class="number">2</span></span><br><span class="line"> <span class="number">6</span> <span class="number">0110</span> <span class="number">2</span></span><br><span class="line"> <span class="number">7</span> <span class="number">0111</span> <span class="number">3</span></span><br><span class="line"> <span class="number">8</span> <span class="number">1000</span> <span class="number">1</span></span><br><span class="line"> <span class="number">9</span> <span class="number">1001</span> <span class="number">2</span></span><br><span class="line"><span class="number">10</span> <span class="number">1010</span> <span class="number">2</span></span><br><span class="line"><span class="number">11</span> <span class="number">1011</span> <span class="number">3</span></span><br><span class="line"><span class="number">12</span> <span class="number">1100</span> <span class="number">2</span></span><br><span class="line"><span class="number">13</span> <span class="number">1101</span> <span class="number">3</span></span><br><span class="line"><span class="number">14</span> <span class="number">1110</span> <span class="number">3</span></span><br><span class="line"><span class="number">15</span> <span class="number">1111</span> <span class="number">4</span></span><br><span class="line"> <span class="number">0</span> <span class="number">0000</span> <span class="number">0</span></span><br><span class="line"> <span class="number">1</span> <span class="number">0001</span> <span class="number">1</span></span><br><span class="line"> <span class="number">2</span> <span class="number">0010</span> <span class="number">1</span></span><br><span class="line"> <span class="number">3</span> <span class="number">0011</span> <span class="number">2</span></span><br><span class="line"> <span class="number">4</span> <span class="number">0100</span> <span class="number">1</span></span><br><span class="line"> <span class="number">5</span> <span class="number">0101</span> <span class="number">2</span></span><br><span class="line"> <span class="number">6</span> <span class="number">0110</span> <span class="number">2</span></span><br><span class="line"> <span class="number">7</span> <span class="number">0111</span> <span class="number">3</span></span><br><span class="line"> <span class="number">8</span> <span class="number">1000</span> <span class="number">1</span></span><br><span class="line"> <span class="number">9</span> <span class="number">1001</span> <span class="number">2</span></span><br><span class="line"><span class="number">10</span> <span class="number">1010</span> <span class="number">2</span></span><br><span class="line"><span class="number">11</span> <span class="number">1011</span> <span class="number">3</span></span><br><span class="line"><span class="number">12</span> <span class="number">1100</span> <span class="number">2</span></span><br><span class="line"><span class="number">13</span> <span class="number">1101</span> <span class="number">3</span></span><br><span class="line"><span class="number">14</span> <span class="number">1110</span> <span class="number">3</span></span><br><span class="line"><span class="number">15</span> <span class="number">1111</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p><em>This was useful only before go 1.9.<br>
See math/bits.OnesCount instead</em></p>
<p>or</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/bits"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">uint</span>(<span class="number">0</span>); i &lt; <span class="number">16</span>; i++ &#123;</span><br><span class="line">		c := bits.OnesCount(i)</span><br><span class="line">		fmt.Printf(<span class="string">"%4d %04[1]b %d\n"</span>, i, c)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">0</span> <span class="number">0000</span> <span class="number">0</span></span><br><span class="line"> <span class="number">1</span> <span class="number">0001</span> <span class="number">1</span></span><br><span class="line"> <span class="number">2</span> <span class="number">0010</span> <span class="number">1</span></span><br><span class="line"> <span class="number">3</span> <span class="number">0011</span> <span class="number">2</span></span><br><span class="line"> <span class="number">4</span> <span class="number">0100</span> <span class="number">1</span></span><br><span class="line"> <span class="number">5</span> <span class="number">0101</span> <span class="number">2</span></span><br><span class="line"> <span class="number">6</span> <span class="number">0110</span> <span class="number">2</span></span><br><span class="line"> <span class="number">7</span> <span class="number">0111</span> <span class="number">3</span></span><br><span class="line"> <span class="number">8</span> <span class="number">1000</span> <span class="number">1</span></span><br><span class="line"> <span class="number">9</span> <span class="number">1001</span> <span class="number">2</span></span><br><span class="line"><span class="number">10</span> <span class="number">1010</span> <span class="number">2</span></span><br><span class="line"><span class="number">11</span> <span class="number">1011</span> <span class="number">3</span></span><br><span class="line"><span class="number">12</span> <span class="number">1100</span> <span class="number">2</span></span><br><span class="line"><span class="number">13</span> <span class="number">1101</span> <span class="number">3</span></span><br><span class="line"><span class="number">14</span> <span class="number">1110</span> <span class="number">3</span></span><br><span class="line"><span class="number">15</span> <span class="number">1111</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, <span class="number">6usize</span>.count_ones())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2</code></p>
<br>
<h3 id="85-font-color-fbb02d-Check-if-integer-addition-will-overflow-font"><a class="header-anchor" href="#85-font-color-fbb02d-Check-if-integer-addition-will-overflow-font">¶</a>85. <font color="fbb02d">Check if integer addition will overflow</font></h3>
<p><em>检查两个整型相加是否溢出</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">willAddOverflow</span><span class="params">(a, b <span class="keyword">int64</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a &gt; math.MaxInt64-b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	fmt.Println(willAddOverflow(<span class="number">11111111111111111</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>false</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">adding_will_overflow</span></span>(x: <span class="built_in">usize</span>, y: <span class="built_in">usize</span>) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">    x.checked_add(y).is_none()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345678</span>, <span class="number">9012345</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = adding_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; + &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345678901</span>, <span class="number">9012345678</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = adding_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; + &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345678901234</span>, <span class="number">9012345678901</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = adding_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; + &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">23456789012345678</span>, <span class="number">90123456789012345</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = adding_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; + &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">12345678901234567890</span>, <span class="number">9012345678901234567</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = adding_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; + &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2345678</span> + <span class="number">9012345</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">2345678901</span> + <span class="number">9012345678</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">2345678901234</span> + <span class="number">9012345678901</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">23456789012345678</span> + <span class="number">90123456789012345</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">12345678901234567890</span> + <span class="number">9012345678901234567</span> overflows</span><br></pre></td></tr></table></figure>
<br>
<h3 id="86-font-color-bfbdc1-Check-if-integer-multiplication-will-overflow-font"><a class="header-anchor" href="#86-font-color-bfbdc1-Check-if-integer-multiplication-will-overflow-font">¶</a>86. <font color="bfbdc1">Check if integer multiplication will overflow</font></h3>
<p><em>检查整型相乘是否溢出</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">multiplyWillOverflow</span><span class="params">(x, y <span class="keyword">uint64</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> x &lt;= <span class="number">1</span> || y &lt;= <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	d := x * y</span><br><span class="line">	<span class="keyword">return</span> d/y != x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> x, y <span class="keyword">uint64</span> = <span class="number">2345</span>, <span class="number">6789</span></span><br><span class="line">		<span class="keyword">if</span> multiplyWillOverflow(x, y) &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"overflows"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"doesn't overflow"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> x, y <span class="keyword">uint64</span> = <span class="number">2345678</span>, <span class="number">9012345</span></span><br><span class="line">		<span class="keyword">if</span> multiplyWillOverflow(x, y) &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"overflows"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"doesn't overflow"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">var</span> x, y <span class="keyword">uint64</span> = <span class="number">2345678901</span>, <span class="number">9012345678</span></span><br><span class="line">		<span class="keyword">if</span> multiplyWillOverflow(x, y) &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"overflows"</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(x, <span class="string">"*"</span>, y, <span class="string">"doesn't overflow"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2345</span> * <span class="number">6789</span> doesn<span class="string">'t overflow</span></span><br><span class="line"><span class="string">2345678 * 9012345 doesn'</span>t overflow</span><br><span class="line"><span class="number">2345678901</span> * <span class="number">9012345678</span> overflows</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345</span>, <span class="number">6789</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = multiply_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; * &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345678</span>, <span class="number">9012345</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = multiply_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; * &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> (x, y) = (<span class="number">2345678901</span>, <span class="number">9012345678</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> overflow = multiply_will_overflow(x, y);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">"&#123;&#125; * &#123;&#125; &#123;&#125;"</span>,</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">            <span class="keyword">if</span> overflow &#123;</span><br><span class="line">                <span class="string">"overflows"</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="string">"doesn't overflow"</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">multiply_will_overflow</span></span>(x: <span class="built_in">i64</span>, y: <span class="built_in">i64</span>) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">    x.checked_mul(y).is_none()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2345</span> * <span class="number">6789</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">2345678</span> * <span class="number">9012345</span> doesn<span class="symbol">'t</span> overflow</span><br><span class="line"><span class="number">2345678901</span> * <span class="number">9012345678</span> overflows</span><br></pre></td></tr></table></figure>
<br>
<h3 id="87-font-color-37323e-Stop-program-font"><a class="header-anchor" href="#87-font-color-37323e-Stop-program-font">¶</a>87. <font color="37323e">Stop program</font></h3>
<blockquote>
<p>Exit immediatly.<br> If some extra cleanup work is executed by the program runtime (not by the OS itself), describe it.</p>
</blockquote>
<p><em>停止程序,立即退出。</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"os"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	os.Exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	<span class="built_in">print</span>(<span class="number">2222</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    std::process::exit(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"42"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="88-font-color-deb841-Allocate-1M-bytes-font"><a class="header-anchor" href="#88-font-color-deb841-Allocate-1M-bytes-font">¶</a>88. <font color="deb841">Allocate 1M bytes</font></h3>
<p><em>分配1M内存</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1000000</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i, b := <span class="keyword">range</span> buf &#123;</span><br><span class="line">		<span class="keyword">if</span> b != <span class="number">0</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"Found unexpected value"</span>, b, <span class="string">"at position"</span>, i)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Buffer was correctly initialized with zero values."</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Buffer was correctly initialized with zero values.</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> buf: <span class="built_in">Vec</span>&lt;<span class="built_in">u8</span>&gt; = <span class="built_in">Vec</span>::with_capacity(<span class="number">1024</span> * <span class="number">1024</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, buf.capacity());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>1048576</code></p>
<br>
<h3 id="89-font-color-580aff-Handle-invalid-argument-font"><a class="header-anchor" href="#89-font-color-580aff-Handle-invalid-argument-font">¶</a>89. <font color="580aff">Handle invalid argument</font></h3>
<p><em>处理无效参数</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// NewSquareMatrix creates a N-by-N matrix</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewSquareMatrix</span><span class="params">(N <span class="keyword">int</span>)</span> <span class="params">([][]<span class="keyword">float64</span>, error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> N &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">"Invalid size %d: order cannot be negative"</span>, N)</span><br><span class="line">	&#125;</span><br><span class="line">	matrix := <span class="built_in">make</span>([][]<span class="keyword">float64</span>, N)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> matrix &#123;</span><br><span class="line">		matrix[i] = <span class="built_in">make</span>([]<span class="keyword">float64</span>, N)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> matrix, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	N1 := <span class="number">3</span></span><br><span class="line">	matrix1, err1 := NewSquareMatrix(N1)</span><br><span class="line">	<span class="keyword">if</span> err1 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(matrix1)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(err1)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	N2 := <span class="number">-2</span></span><br><span class="line">	matrix2, err2 := NewSquareMatrix(N2)</span><br><span class="line">	<span class="keyword">if</span> err2 == <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(matrix2)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(err2)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>] [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]]</span><br><span class="line">Invalid size <span class="number">-2</span>: order cannot be negative</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug, PartialEq, Eq)]</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CustomError</span></span> &#123; InvalidAnswer &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">do_stuff</span></span>(x: <span class="built_in">i32</span>) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">i32</span>, CustomError&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> x != <span class="number">42</span> &#123;</span><br><span class="line">%<span class="number">2</span></span><br></pre></td></tr></table></figure>
<br>
<h3 id="90-font-color-de9e36-Read-only-outside-font"><a class="header-anchor" href="#90-font-color-de9e36-Read-only-outside-font">¶</a>90. <font color="de9e36">Read-only outside</font></h3>
<p><em>外部只读</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Foo <span class="keyword">struct</span> &#123;</span><br><span class="line">	x <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Foo)</span> <span class="title">X</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> f.x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x is private, because it is not capitalized.</span><br><span class="line">(*Foo).X is a public getter (a read accessor).</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Foo</span></span> &#123;</span><br><span class="line">    x: <span class="built_in">usize</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> Foo &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(x: <span class="built_in">usize</span>) -&gt; <span class="keyword">Self</span> &#123;</span><br><span class="line">        Foo &#123; x &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">x</span></span>&lt;<span class="symbol">'a</span>&gt;(&amp;<span class="symbol">'a</span> <span class="keyword">self</span>) -&gt; &amp;<span class="symbol">'a</span> <span class="built_in">usize</span> &#123;</span><br><span class="line">        &amp;<span class="keyword">self</span>.x</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="91-font-color-031d44-Load-JSON-file-into-struct-font"><a class="header-anchor" href="#91-font-color-031d44-Load-JSON-file-into-struct-font">¶</a>91. <font color="031d44">Load JSON file into struct</font></h3>
<p><em>json转结构体</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"io/ioutil"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"encoding/json"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readJSONFile</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x Person</span><br><span class="line"></span><br><span class="line">	buffer, err := ioutil.ReadFile(filename)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	err = json.Unmarshal(buffer, &amp;x)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(x)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := readJSONFile()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	FirstName <span class="keyword">string</span></span><br><span class="line">	Age       <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filename = <span class="string">"/tmp/data.json"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := ioutil.WriteFile(filename, []<span class="keyword">byte</span>(<span class="string">`</span></span><br><span class="line"><span class="string">		&#123;</span></span><br><span class="line"><span class="string">			"FirstName":"Napoléon",</span></span><br><span class="line"><span class="string">			"Age": 51 </span></span><br><span class="line"><span class="string">		&#125;`</span>), <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>{Napoléon 51}</code></p>
<p>or</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"encoding/json"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io/ioutil"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readJSONFile</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x Person</span><br><span class="line"></span><br><span class="line">	r, err := os.Open(filename)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	decoder := json.NewDecoder(r)</span><br><span class="line">	err = decoder.Decode(&amp;x)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(x)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := readJSONFile()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	FirstName <span class="keyword">string</span></span><br><span class="line">	Age       <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filename = <span class="string">"/tmp/data.json"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := ioutil.WriteFile(filename, []<span class="keyword">byte</span>(<span class="string">`</span></span><br><span class="line"><span class="string">		&#123;</span></span><br><span class="line"><span class="string">			"FirstName":"Napoléon",</span></span><br><span class="line"><span class="string">			"Age": 51 </span></span><br><span class="line"><span class="string">		&#125;`</span>), <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>{Napoléon 51}</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[macro_use]</span> <span class="keyword">extern</span> <span class="keyword">crate</span> serde_derive;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> serde_json;</span><br><span class="line"><span class="keyword">use</span> std::fs::File;</span><br><span class="line"><span class="keyword">let</span> x = ::serde_json::from_reader(File::open(<span class="string">"data.json"</span>)?)?;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="92-font-color-04395e-Save-object-into-JSON-file-font"><a class="header-anchor" href="#92-font-color-04395e-Save-object-into-JSON-file-font">¶</a>92. <font color="04395e">Save object into JSON file</font></h3>
<p><em>将json对象写入文件</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"io/ioutil"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"encoding/json"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeJSONFile</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	x := Person&#123;</span><br><span class="line">		FirstName: <span class="string">"Napoléon"</span>,</span><br><span class="line">		Age:       <span class="number">51</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	buffer, err := json.MarshalIndent(x, <span class="string">""</span>, <span class="string">"  "</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ioutil.WriteFile(filename, buffer, <span class="number">0644</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := writeJSONFile()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Done."</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	FirstName <span class="keyword">string</span></span><br><span class="line">	Age       <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filename = <span class="string">"/tmp/data.json"</span></span><br></pre></td></tr></table></figure>
<p><em>json.MarshalIndent is more human-readable than json.Marshal.</em></p>
<p><code>Done.</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> serde_json;</span><br><span class="line"><span class="meta">#[macro_use]</span> <span class="keyword">extern</span> <span class="keyword">crate</span> serde_derive;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> std::fs::File;</span><br><span class="line">::serde_json::to_writer(&amp;File::create(<span class="string">"data.json"</span>)?, &amp;x)?</span><br></pre></td></tr></table></figure>
<br>
<h3 id="93-font-color-70a288-Pass-a-runnable-procedure-as-parameter-font"><a class="header-anchor" href="#93-font-color-70a288-Pass-a-runnable-procedure-as-parameter-font">¶</a>93. <font color="70a288">Pass a runnable procedure as parameter</font></h3>
<blockquote>
<p>Implement procedure control which receives one parameter f, and runs f.</p>
</blockquote>
<p><em>以函数作为参数</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	control(greet)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">control</span><span class="params">(f <span class="keyword">func</span>()</span>)</span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Before f"</span>)</span><br><span class="line">	f()</span><br><span class="line">	fmt.Println(<span class="string">"After f"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">greet</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Hello, developers"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>Go supports first class functions, higher-order functions, user-defined function types, function literals, and closures.</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Before f</span><br><span class="line">Hello, developers</span><br><span class="line">After f</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">control</span></span>(f: <span class="keyword">impl</span> <span class="built_in">Fn</span>()) &#123;</span><br><span class="line">    f();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">hello</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"Hello,"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    control(hello);</span><br><span class="line">    control(|| &#123; <span class="built_in">println!</span>(<span class="string">"Is there anybody in there?"</span>); &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello,</span><br><span class="line">Is there anybody <span class="keyword">in</span> there?</span><br></pre></td></tr></table></figure>
<br>
<h3 id="94-font-color-dab785-Print-type-of-variable-font"><a class="header-anchor" href="#94-font-color-dab785-Print-type-of-variable-font">¶</a>94. <font color="dab785">Print type of variable</font></h3>
<p><em>打印变量的类型</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">	<span class="string">"reflect"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	x = <span class="string">"Hello"</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(x))</span><br><span class="line"></span><br><span class="line">	x = <span class="number">4</span></span><br><span class="line">	fmt.Println(reflect.TypeOf(x))</span><br><span class="line"></span><br><span class="line">	x = os.NewFile(<span class="number">0777</span>, <span class="string">"foobar.txt"</span>)</span><br><span class="line">	fmt.Println(reflect.TypeOf(x))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">*os.File</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	x = <span class="string">"Hello"</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T"</span>, x)</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	x = <span class="number">4</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T"</span>, x)</span><br><span class="line">	fmt.Println()</span><br><span class="line"></span><br><span class="line">	x = os.NewFile(<span class="number">0777</span>, <span class="string">"foobar.txt"</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%T"</span>, x)</span><br><span class="line">	fmt.Println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span></span><br><span class="line"><span class="keyword">int</span></span><br><span class="line">*os.File</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![feature(core_intrinsics)]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">type_of</span></span>&lt;T&gt;(_: &amp;T) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="built_in">format!</span>(<span class="string">"&#123;&#125;"</span>, std::intrinsics::type_name::&lt;T&gt;())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x: <span class="built_in">i32</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, type_of(&amp;x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>i32</code></p>
<br>
<h3 id="95-font-color-d5896f-Get-file-size-font"><a class="header-anchor" href="#95-font-color-d5896f-Get-file-size-font">¶</a>95. <font color="d5896f">Get file size</font></h3>
<p><em>获取文件的大小</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"io/ioutil"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := printSize(<span class="string">"file.txt"</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSize</span><span class="params">(path <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	info, err := os.Stat(path)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> err</span><br><span class="line">	&#125;</span><br><span class="line">	x := info.Size()</span><br><span class="line"></span><br><span class="line">	fmt.Println(x)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// The file will only contains the characters "Hello", no newlines.</span></span><br><span class="line">	buffer := []<span class="keyword">byte</span>(<span class="string">"Hello"</span>)</span><br><span class="line">	err := ioutil.WriteFile(<span class="string">"file.txt"</span>, buffer, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>5</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">filesize</span></span>(path: &amp;<span class="built_in">str</span>) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">u64</span>, std::io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> x = fs::metadata(path)?.len();</span><br><span class="line">    <span class="literal">Ok</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> path = <span class="string">"/etc/hosts"</span>;</span><br><span class="line">    <span class="keyword">let</span> x = filesize(path);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;: &#123;:?&#125; bytes"</span>, path, x.unwrap());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>/etc/hosts: 150 bytes</code></p>
<p>or</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::path::Path;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">filesize</span></span>(path: &amp;std::path::Path) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">u64</span>, std::io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> x = path.metadata()?.len();</span><br><span class="line">    <span class="literal">Ok</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> path = Path::new(<span class="string">"/etc/hosts"</span>);</span><br><span class="line">    <span class="keyword">let</span> x = filesize(path);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;: &#123;:?&#125; bytes"</span>, path, x.unwrap());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>&quot;/etc/hosts&quot;: 150 bytes</code></p>
<br>
<h3 id="96-font-color-e8d6cb-Check-string-prefix-font"><a class="header-anchor" href="#96-font-color-e8d6cb-Check-string-prefix-font">¶</a>96. <font color="e8d6cb">Check string prefix</font></h3>
<blockquote>
<p>Set boolean b to true if string s starts with prefix prefix, false otherwise.</p>
</blockquote>
<p><em>检查两个字符串前缀是否一致</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(s, prefix <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	b := strings.HasPrefix(s, prefix)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> b &#123;</span><br><span class="line">		fmt.Println(s, <span class="string">"starts with"</span>, prefix)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(s, <span class="string">"doesn't start with"</span>, prefix)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	check(<span class="string">"bar"</span>, <span class="string">"foo"</span>)</span><br><span class="line">	check(<span class="string">"foobar"</span>, <span class="string">"foo"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bar doesn<span class="string">'t start with foo</span></span><br><span class="line"><span class="string">foobar starts with foo</span></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="string">"bananas"</span>;</span><br><span class="line">    <span class="keyword">let</span> prefix = <span class="string">"bana"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> b = s.starts_with(prefix);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>true</code></p>
<br>
<h3 id="97-font-color-d0ada7-Check-string-suffix-font"><a class="header-anchor" href="#97-font-color-d0ada7-Check-string-suffix-font">¶</a>97. <font color="d0ada7">Check string suffix</font></h3>
<blockquote>
<p>Set boolean b to true if string s ends with string suffix, false otherwise.</p>
</blockquote>
<p><em>检查字符串后缀</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(s, suffix <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	b := strings.HasSuffix(s, suffix)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> b &#123;</span><br><span class="line">		fmt.Println(s, <span class="string">"ends with"</span>, suffix)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(s, <span class="string">"doesn't end with"</span>, suffix)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	check(<span class="string">"foo"</span>, <span class="string">"bar"</span>)</span><br><span class="line">	check(<span class="string">"foobar"</span>, <span class="string">"bar"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo doesn<span class="string">'t end with bar</span></span><br><span class="line"><span class="string">foobar ends with bar</span></span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="string">"bananas"</span>;</span><br><span class="line">    <span class="keyword">let</span> suffix = <span class="string">"nas"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> b = s.ends_with(suffix);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>true</code></p>
<br>
<h3 id="98-font-color-ad6a6c-Epoch-seconds-to-date-object-font"><a class="header-anchor" href="#98-font-color-ad6a6c-Epoch-seconds-to-date-object-font">¶</a>98. <font color="ad6a6c">Epoch seconds to date object</font></h3>
<blockquote>
<p>Convert a timestamp ts (number of seconds in epoch-time) to a date with time d. E.g. 0 -&gt; 1970-01-01 00:00:00</p>
</blockquote>
<p><em>时间戳转日期</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ts := <span class="keyword">int64</span>(<span class="number">1451606400</span>)</span><br><span class="line">	d := time.Unix(ts, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2016-01-01 00:00:00 +0000 UTC</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> chrono;</span><br><span class="line"><span class="keyword">use</span> chrono::prelude::*;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> ts = <span class="number">1451606400</span>;</span><br><span class="line">    <span class="keyword">let</span> d = NaiveDateTime::from_timestamp(ts, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2016-01-01 00:00:00</code></p>
<br>
<h3 id="99-font-color-5d2e46-Format-date-YYYY-MM-DD-font"><a class="header-anchor" href="#99-font-color-5d2e46-Format-date-YYYY-MM-DD-font">¶</a>99. <font color="5d2e46">Format date YYYY-MM-DD</font></h3>
<blockquote>
<p>Assign to string x the value of fields (year, month, day) of date d, in format YYYY-MM-DD.</p>
</blockquote>
<p><em>时间格式转换</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d := time.Now()</span><br><span class="line">	x := d.Format(<span class="string">"2006-01-02"</span>)</span><br><span class="line">	fmt.Println(x)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// The output may be "2009-11-10" because the Playground's clock is fixed in the past.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2009-11-10</code></p>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> chrono;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> chrono::prelude::*;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, Utc::today().format(<span class="string">"%Y-%m-%d"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>2021-07-17</code></p>
<br>
<h3 id="100-font-color-b58db6-Sort-by-a-comparator-font"><a class="header-anchor" href="#100-font-color-b58db6-Sort-by-a-comparator-font">¶</a>100. <font color="b58db6">Sort by a comparator</font></h3>
<blockquote>
<p>Sort elements of array-like collection items, using a comparator c.</p>
</blockquote>
<p><em>根据某个字段排序</em></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"sort"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">	label <span class="keyword">string</span></span><br><span class="line">	p     <span class="keyword">int</span></span><br><span class="line">	lang  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c returns true if x is "inferior to" y (in a custom way)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">c</span><span class="params">(x, y Item)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x.p &lt; y.p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ItemCSorter []Item</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemCSorter)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>           &#123; <span class="keyword">return</span> <span class="built_in">len</span>(s) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemCSorter)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> c(s[i], s[j]) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemCSorter)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; s[i], s[j] = s[j], s[i] &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sortItems</span><span class="params">(items []Item)</span></span> &#123;</span><br><span class="line">	sorter := ItemCSorter(items)</span><br><span class="line">	sort.Sort(sorter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	items := []Item&#123;</span><br><span class="line">		&#123;<span class="string">"twelve"</span>, <span class="number">12</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"six"</span>, <span class="number">6</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"eleven"</span>, <span class="number">11</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"zero"</span>, <span class="number">0</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"two"</span>, <span class="number">2</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Unsorted: "</span>, items)</span><br><span class="line">	sortItems(items)</span><br><span class="line">	fmt.Println(<span class="string">"Sorted: "</span>, items)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>c has type func(Item, Item) bool.</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unsorted:  [&#123;twelve <span class="number">12</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125;]</span><br><span class="line">Sorted:  [&#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;twelve <span class="number">12</span> english&#125;]</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"sort"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">	label <span class="keyword">string</span></span><br><span class="line">	p     <span class="keyword">int</span></span><br><span class="line">	lang  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ItemsSorter <span class="keyword">struct</span> &#123;</span><br><span class="line">	items []Item</span><br><span class="line">	c     <span class="function"><span class="keyword">func</span><span class="params">(x, y Item)</span> <span class="title">bool</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemsSorter)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>           &#123; <span class="keyword">return</span> <span class="built_in">len</span>(s.items) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemsSorter)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> s.c(s.items[i], s.items[j]) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s ItemsSorter)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; s.items[i], s.items[j] = s.items[j], s.items[i] &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sortItems</span><span class="params">(items []Item, c <span class="keyword">func</span>(x, y Item)</span> <span class="title">bool</span>)</span> &#123;</span><br><span class="line">	sorter := ItemsSorter&#123;</span><br><span class="line">		items,</span><br><span class="line">		c,</span><br><span class="line">	&#125;</span><br><span class="line">	sort.Sort(sorter)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	items := []Item&#123;</span><br><span class="line">		&#123;<span class="string">"twelve"</span>, <span class="number">12</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"six"</span>, <span class="number">6</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"eleven"</span>, <span class="number">11</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"zero"</span>, <span class="number">0</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"two"</span>, <span class="number">2</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Unsorted: "</span>, items)</span><br><span class="line"></span><br><span class="line">	c := <span class="function"><span class="keyword">func</span><span class="params">(x, y Item)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> x.p &lt; y.p</span><br><span class="line">	&#125;</span><br><span class="line">	sortItems(items, c)</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">"Sorted: "</span>, items)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ItemsSorter contains c, which can be any comparator decided at runtime.</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unsorted:  [&#123;twelve <span class="number">12</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125;]</span><br><span class="line">Sorted:  [&#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;twelve <span class="number">12</span> english&#125;]</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"sort"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Item <span class="keyword">struct</span> &#123;</span><br><span class="line">	label <span class="keyword">string</span></span><br><span class="line">	p     <span class="keyword">int</span></span><br><span class="line">	lang  <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// c returns true if x is "inferior to" y (in a custom way)</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">c</span><span class="params">(x, y Item)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x.p &lt; y.p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	items := []Item&#123;</span><br><span class="line">		&#123;<span class="string">"twelve"</span>, <span class="number">12</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"six"</span>, <span class="number">6</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"eleven"</span>, <span class="number">11</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"zero"</span>, <span class="number">0</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">		&#123;<span class="string">"two"</span>, <span class="number">2</span>, <span class="string">"english"</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"Unsorted: "</span>, items)</span><br><span class="line">	</span><br><span class="line">	sort.Slice(items, <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">		<span class="keyword">return</span> c(items[i], items[j])</span><br><span class="line">	&#125;)</span><br><span class="line">	</span><br><span class="line">	fmt.Println(<span class="string">"Sorted: "</span>, items)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Since Go 1.8, a single func parameter is sufficient to sort a slice.</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unsorted:  [&#123;twelve <span class="number">12</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125;]</span><br><span class="line">Sorted:  [&#123;zero <span class="number">0</span> english&#125; &#123;two <span class="number">2</span> english&#125; &#123;six <span class="number">6</span> english&#125; &#123;eleven <span class="number">11</span> english&#125; &#123;twelve <span class="number">12</span> english&#125;]</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> items = [<span class="number">1</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    items.sort_by(<span class="built_in">i32</span>::cmp);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, items);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>[1, 2, 3, 5, 7]</code></p>
<br>
<!--爽哥为赞赏功能新加--></div><!--script(type='text/javascript', src=url_for(theme.js) + '/jquery.js' + '?v=' + theme.version, async)--><script type="text/javascript" src="https://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script><div class="post-donate"><div id="donate_board" class="donate_bar center"><a id="btn_donate" href="javascript:;" title="打赏" class="btn_donate"></a><div class="donate_txt"> &uarr;<br>BTC Address:3NNxkM6ez7szsUAgTnK2VaF949LoGmXuBs<br></div></div><div id="donate_guide" class="donate_bar center hidden pay"><img src="http://cuishuang.gitee.io/img/weChatMoney.png" title="微信打赏" alt="微信打赏"><img src="http://cuishuang.gitee.io/img/alipayMoney.png" title="支付宝打赏" alt="支付宝打赏"><img src="http://cuishuang.gitee.io/img/btc.png" title="比特币打赏" alt="比特币打赏"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><!-- google adsense--><!--if theme.show_ad_post == true--><!--    script(async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")--><!--    ins.adsbygoogle(style="display:block" data-ad-client="ca-pub-1181798273731653" data-ad-format="auto")--><!--    script (adsbygoogle = window.adsbygoogle || []).push({});-->
<div class="post-copyright"><blockquote><p>原文作者: fliter</p><p>原文链接: </p><a href="http://www.dashen.tech/2021/09/06/Rust-vs-Go-常用语法对比-5/">http://www.dashen.tech/2021/09/06/Rust-vs-Go-常用语法对比-5/</a><p>版权声明: 转载请注明出处</p></blockquote></div><div class="tags"><a href="/tags/Rust/">Rust</a></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2021/09/07/Rust-vs-Go-常用语法对比-6/" class="pre">Rust vs Go:常用语法对比(6)</a><a href="/2021/09/05/Rust-vs-Go-常用语法对比-4/" class="next">Rust vs Go:常用语法对比(4)</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#81-font-color-fb6107-Round-floating-point-number-to-integer-font"><span class="toc-text">¶81. Round floating point number to integer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#82-font-color-f3de2c-Count-substring-occurrences-font"><span class="toc-text">¶82. Count substring occurrences</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#83-font-color-7cb518-Regex-with-character-repetition-font"><span class="toc-text">¶83. Regex with character repetition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#84-font-color-5c8001-Count-bits-set-in-integer-binary-representation-font"><span class="toc-text">¶84. Count bits set in integer binary representation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#85-font-color-fbb02d-Check-if-integer-addition-will-overflow-font"><span class="toc-text">¶85. Check if integer addition will overflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#86-font-color-bfbdc1-Check-if-integer-multiplication-will-overflow-font"><span class="toc-text">¶86. Check if integer multiplication will overflow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#87-font-color-37323e-Stop-program-font"><span class="toc-text">¶87. Stop program</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#88-font-color-deb841-Allocate-1M-bytes-font"><span class="toc-text">¶88. Allocate 1M bytes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#89-font-color-580aff-Handle-invalid-argument-font"><span class="toc-text">¶89. Handle invalid argument</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#90-font-color-de9e36-Read-only-outside-font"><span class="toc-text">¶90. Read-only outside</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#91-font-color-031d44-Load-JSON-file-into-struct-font"><span class="toc-text">¶91. Load JSON file into struct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#92-font-color-04395e-Save-object-into-JSON-file-font"><span class="toc-text">¶92. Save object into JSON file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#93-font-color-70a288-Pass-a-runnable-procedure-as-parameter-font"><span class="toc-text">¶93. Pass a runnable procedure as parameter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#94-font-color-dab785-Print-type-of-variable-font"><span class="toc-text">¶94. Print type of variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#95-font-color-d5896f-Get-file-size-font"><span class="toc-text">¶95. Get file size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#96-font-color-e8d6cb-Check-string-prefix-font"><span class="toc-text">¶96. Check string prefix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#97-font-color-d0ada7-Check-string-suffix-font"><span class="toc-text">¶97. Check string suffix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#98-font-color-ad6a6c-Epoch-seconds-to-date-object-font"><span class="toc-text">¶98. Epoch seconds to date object</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#99-font-color-5d2e46-Format-date-YYYY-MM-DD-font"><span class="toc-text">¶99. Format date YYYY-MM-DD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#100-font-color-b58db6-Sort-by-a-comparator-font"><span class="toc-text">¶100. Sort by a comparator</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/11/24/Go内存管理之内存分配/">Go内存管理之内存分配</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/11/17/Go内存优化/">Go内存优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/11/09/关于零号协程/">关于零号协程</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/10/08/代码搜索技巧/">代码搜索技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/25/SubQuery入门指南II/">SubQuery入门指南II</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/25/SubQuery入门指南/">SubQuery入门指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/19/搭建substrate开发环境/">搭建substrate开发环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/18/使用Selenium获取网站信息/">使用Selenium获取网站信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/15/Rust-vs-Go-常用语法对比-13/">Rust vs Go:常用语法对比(13)</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/09/13/Rust-vs-Go-常用语法对比-12/">Rust vs Go:常用语法对比(12)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-weixin"> 扫码关注-旅途散记</i></div><img width="100%" height="233" title="微信扫一扫" src="https://cuishuang.gitee.io/img/lvtusanji.jpg"></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tech/">Tech</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tree/">Tree</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/runtime/">runtime</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/sync/">sync</a><span class="category-list-count">12</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/操作系统/" style="font-size: 15px;">操作系统</a> <a href="/tags/Todo/" style="font-size: 15px;">Todo</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Pearl/" style="font-size: 15px;">Pearl</a> <a href="/tags/译海一粟/" style="font-size: 15px;">译海一粟</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a> <a href="/tags/Compiler/" style="font-size: 15px;">Compiler</a> <a href="/tags/数据库/" style="font-size: 15px;">数据库</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/密码学/" style="font-size: 15px;">密码学</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/杂谈/" style="font-size: 15px;">杂谈</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/金庸/" style="font-size: 15px;">金庸</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/数学/" style="font-size: 15px;">数学</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/Rust/" style="font-size: 15px;">Rust</a> <a href="/tags/explore/" style="font-size: 15px;">explore</a> <a href="/tags/书摘-影评/" style="font-size: 15px;">书摘/影评</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/足球-体育/" style="font-size: 15px;">足球&体育</a> <a href="/tags/读城记/" style="font-size: 15px;">读城记</a> <a href="/tags/星陨/" style="font-size: 15px;">星陨</a> <a href="/tags/奇文共赏/" style="font-size: 15px;">奇文共赏</a> <a href="/tags/区域经济/" style="font-size: 15px;">区域经济</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">四月 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">十二月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">四月 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">三月 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1093/02/">二月 1093</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://leetcode.com/" title="LeetCode" target="_blank">LeetCode</a><ul></ul><a href="https://golang.org/" title="Go官网" target="_blank">Go官网</a><ul></ul><a href="https://tonybai.com/" title="TonyBai" target="_blank">TonyBai</a><ul></ul><a href="http://lietoumai.com/" title="顾问麦的小站" target="_blank">顾问麦的小站</a><ul></ul><a href="https://www.coolshell.cn/" title="酷壳" target="_blank">酷壳</a><ul></ul><a href="https://notes.diguage.com/" title="瓜哥" target="_blank">瓜哥</a><ul></ul><a href="https://taoshu.in/" title="涛叔" target="_blank">涛叔</a><ul></ul><a href="https://colobu.com/" title="鸟窝" target="_blank">鸟窝</a><ul></ul><a href="http://xiaorui.cc/" title="峰云" target="_blank">峰云</a><ul></ul><a href="https://eddycjy.com/posts/" title="煎鱼" target="_blank">煎鱼</a><ul></ul><a href="https://hutusi.com/" title="胡涂说" target="_blank">胡涂说</a><ul></ul><a href="https://qcrao.com/" title="码农桃花源" target="_blank">码农桃花源</a><ul></ul><a href="https://github.com/KeKe-Li/For-learning-Go-Tutorial" title="远方的笔记" target="_blank">远方的笔记</a><ul></ul><a href="https://xargin.com/" title="No Headback" target="_blank">No Headback</a><ul></ul><a href="http://thoslin.github.io/" title="Eat Pray Code" target="_blank">Eat Pray Code</a><ul></ul><a href="https://www.ashenone66.cn/" title="AshenOne's Blog" target="_blank">AshenOne's Blog</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> 备案号:<a href="http://www.beian.miit.gov.cn/"> 鲁ICP备18010105号</a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">fliter.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e10d6858b78ff3fc7853fc72e7240eab";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.3"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.3" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>